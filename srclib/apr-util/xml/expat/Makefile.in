################################################################
# Process this file with top-level configure script to produce Makefile
#
# Copyright 2000 Clark Cooper
#
#  This file is part of EXPAT.
#
#  EXPAT is free software; you can redistribute it and/or modify it
#  under the terms of the License (based on the MIT/X license) contained
#  in the file COPYING that comes with this distribution.
#
# EXPAT IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
# EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
# MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
# IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY
# CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,
# TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE
# SOFTWARE OR THE USE OR OTHER DEALINGS IN EXPAT.
#
#  ---
#  I started using automake, but
#		1) it seemed like overkill
#		2) I don't want all the GNU policies
#		3) I wanted more explicit control over what gets built
#
#  So I'm doing my Makefile.in files manually. But a fair part is based
#  on what I learned from perusing the Makefile.in's generated by automake,
#  and the automake authors still get my kudos.
#

SHELL = @SHELL@

srcdir = @srcdir@
top_srcdir = @top_srcdir@
VPATH = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@

bindir = @bindir@
sbindir = @sbindir@
libexecdir = @libexecdir@
datadir = @datadir@
sysconfdir = @sysconfdir@
sharedstatedir = @sharedstatedir@
localstatedir = @localstatedir@
libdir = @libdir@
infodir = @infodir@
mandir = @mandir@
includedir = @includedir@
oldincludedir = /usr/include

top_builddir = .


AUTOCONF = autoconf

INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_DATA = @INSTALL_DATA@
INSTALL_SCRIPT = @INSTALL_SCRIPT@

NORMAL_INSTALL = :
PRE_INSTALL = :
POST_INSTALL = :
NORMAL_UNINSTALL = :
PRE_UNINSTALL = :
POST_UNINSTALL = :
host_alias = @host_alias@
host_triplet = @host@

CC = @CC@

LIBTOOL = @LIBTOOL@
LN_S = @LN_S@
PACKAGE = @PACKAGE@
RANLIB = @RANLIB@
VERSION = @VERSION@

SUBDIRS = lib
ACLOCAL_M4 = $(top_srcdir)/aclocal.m4
CONFIG_HEADERS = config.h

DISTDIR = $(PACKAGE)-$(VERSION)
DISTRIBUTION = $(DISTDIR).tar.gz

all: build-subdirs

.PHONY: all build-subdirs clean distclean extraclean maintainer-clean dist install \
        uninstall distdir

Makefile: Makefile.in config.status
	CONFIG_FILES=$@ CONFIG_HEADERS= $(SHELL) config.status

config.status: configure
	@if test -f $@; then \
		$(SHELL) config.status --recheck ; \
	else \
		$(SHELL) configure ; \
	fi

configure: configure.in
	$(AUTOCONF)

config.h: config.h.in config.status
	CONFIG_FILES= CONFIG_HEADERS=$(CONFIG_HEADERS) \
	$(SHELL) ./config.status

build-subdirs:
	@list='$(SUBDIRS)'; \
	for dir in $$list; do \
	  cd $$dir; $(MAKE); cd ..; \
	done

clean:
	@list='$(SUBDIRS)'; for dir in $$list; do \
	  cd $$dir; $(MAKE) clean; cd ..; \
	done
	rm -f core *~

distclean:
	@list='$(SUBDIRS)'; for dir in $$list; do \
	  cd $$dir; $(MAKE) distclean; cd ..; \
	done
	rm -f config.h config.status config.log libtool examples/Makefile xmlwf/Makefile Makefile

extraclean: distclean
	rm -f configure aclocal.m4

maintainer-clean: distclean
	rm -f $(DISTRIBUTION)
	rm -rf $(DISTDIR)

distdir: MANIFEST
	test -d $(DISTDIR) && rm -rf $(DISTDIR); \
	mkdir $(DISTDIR); \
	flist=`sed -e "s/[ 	]:.*$$//" MANIFEST`; for file in $$flist; do \
	  cp -P $$file $(DISTDIR); \
	done

$(DISTRIBUTION): distdir
	tar cfz $(DISTRIBUTION) $(DISTDIR)	

dist: $(DISTRIBUTION)

install:
	@list='$(SUBDIRS)'; for dir in $$list; do \
	  cd $$dir; $(MAKE) install; cd ..; \
	done

uninstall:
	@list='$(SUBDIRS)'; for dir in $$list; do \
	  cd $$dir; $(MAKE) uninstall; cd ..; \
	done

depend:
	echo SOMEONE SHOULD MAKE THIS DO SOMETHING!!!
