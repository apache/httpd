################################################################################
#
# Test Setup for localhost
#
################################################################################

ServerName SUBST_SERVER_NAME_SUBST
ServerRoot "SUBST_SERVER_ROOT_SUBST"

Listen SUBST_PORT_HTTP_SUBST

ServerName localhost

Include conf/modules.conf

IncludeOptional conf/mods-enabled/*.load
IncludeOptional conf/mods-enabled/*.conf

ServerAdmin you@localhost

<Directory />
    AllowOverride none
    Require all denied
</Directory>

DocumentRoot "SUBST_SERVER_ROOT_SUBST/htdocs"
<Directory "SUBST_SERVER_ROOT_SUBST/htdocs">
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory>

<IfModule dir_module>
    DirectoryIndex index.html
    DirectoryIndex index.php
</IfModule>
<Files ".ht*">
    Require all denied
</Files>

ErrorLog "logs/error_log"
LogLevel warn

CoreDumpDirectory "/tmp"

<IfModule log_config_module>
    LogFormat "%h %l %u %t \"%r\" %>s %b \"%{Referer}i\" \"%{User-Agent}i\"" combined
    LogFormat "%h %l %u %t \"%r\" %>s %b" common
    CustomLog "logs/access_log" common
</IfModule>

<IfModule alias_module>
    ScriptAlias /cgi-bin/ "SUBST_SERVER_ROOT_SUBST/cgi-bin/"
</IfModule>
<Directory "SUBST_SERVER_ROOT_SUBST/cgi-bin">
    AllowOverride None
    Options None
    Require all granted
</Directory>

<IfModule mime_module>
    TypesConfig conf/mime.types
    AddType application/x-compress .Z
</IfModule>


<IfModule h2_module>
    LogLevel h2:info
    H2Engine on

    # max parallel streams per session, default 100
    #H2MaxSessionStreams
    # max initial window size upstream (per stream), default 64k
    #H2InitialWindowSize 
    # max header list size (the headers for a stream), default 16k
    #H2MaxHeaderListSize
    # max memory buffer size downstream (per stream), default 64k
    #H2StreamMaxMemSize

    # you may set these explicitly, otherwise they are taking from
    # ThreadsPerChild and HardLimitThreads parameters of the mpm module
    #
    #H2MinWorkers 8
    #H2MaxWorkers 128
    # seconds a worker stays idle until shut down, default 10 minutes
    #H2MaxWorkerIdleSeconds 600

    # If stream processing should serialize/read HTTP/1.1 headers for 
    # better backward compatibility with eventually installed filters
    # from other modules or changes in the core.
    # default is off
    #H2SerializeHeaders Off

    # When mpm_event is selected, perform a hack on internal connections that
    # allow them to work. Has no effect when other mpm modules are selected.
    # Defaults to "On"
    #H2HackMpmEvent On

</IfModule>


################################################################################
# SSL Setup
################################################################################
<IfModule ssl_module>
	SSLCipherSuite HIGH:!aNULL:!MD5
	SSLProtocol All -SSLv2 -SSLv3
	SSLPassPhraseDialog  builtin
	SSLSessionCache        "shmcb:SUBST_SERVER_ROOT_SUBST/logs/ssl_scache(512000)"
	SSLSessionCacheTimeout  300

	SSLRandomSeed startup builtin
	SSLRandomSeed connect builtin

	Listen SUBST_PORT_HTTPS_SUBST

</IfModule>

IncludeOptional conf/sites/*.conf

