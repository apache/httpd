<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="fr" xml:lang="fr"><head>
<meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type" />
<!--
        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
              This file is generated from xml source: DO NOT EDIT
        XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
      -->
<title>mod_proxy - Serveur HTTP Apache Version 2.5</title>
<link href="../style/css/manual.css" rel="stylesheet" media="all" type="text/css" title="Main stylesheet" />
<link href="../style/css/manual-loose-100pc.css" rel="alternate stylesheet" media="all" type="text/css" title="No Sidebar - Default font size" />
<link href="../style/css/manual-print.css" rel="stylesheet" media="print" type="text/css" /><link rel="stylesheet" type="text/css" href="../style/css/prettify.css" />
<script src="../style/scripts/prettify.min.js" type="text/javascript">
</script>

<link href="../images/favicon.ico" rel="shortcut icon" /></head>
<body>
<div id="page-header">
<p class="menu"><a href="../mod/">Modules</a> | <a href="../mod/quickreference.html">Directives</a> | <a href="http://wiki.apache.org/httpd/FAQ">FAQ</a> | <a href="../glossary.html">Glossaire</a> | <a href="../sitemap.html">Plan du site</a></p>
<p class="apache">Serveur HTTP Apache Version 2.5</p>
<img alt="" src="../images/feather.png" /></div>
<div class="up"><a href="./"><img title="&lt;-" alt="&lt;-" src="../images/left.gif" /></a></div>
<div id="path">
<a href="http://www.apache.org/">Apache</a> &gt; <a href="http://httpd.apache.org/">Serveur HTTP</a> &gt; <a href="http://httpd.apache.org/docs/">Documentation</a> &gt; <a href="../">Version 2.5</a> &gt; <a href="./">Modules</a></div>
<div id="page-content">
<div id="preamble"><h1>Module Apache mod_proxy</h1>
<div class="toplang">
<p><span>Langues Disponibles: </span><a href="../en/mod/mod_proxy.html" hreflang="en" rel="alternate" title="English">&nbsp;en&nbsp;</a> |
<a href="../fr/mod/mod_proxy.html" title="Fran&#231;ais">&nbsp;fr&nbsp;</a> |
<a href="../ja/mod/mod_proxy.html" hreflang="ja" rel="alternate" title="Japanese">&nbsp;ja&nbsp;</a></p>
</div>
<table class="module"><tr><th><a href="module-dict.html#Description">Description:</a></th><td>Serveur mandataire/passerelle multi-protocole</td></tr>
<tr><th><a href="module-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="module-dict.html#ModuleIdentifier">Identificateur&#160;de&#160;Module:</a></th><td>proxy_module</td></tr>
<tr><th><a href="module-dict.html#SourceFile">Fichier&#160;Source:</a></th><td>mod_proxy.c</td></tr></table>
<h3>Sommaire</h3>

    <div class="warning"><h3>Avertissement</h3>
      <p>N'activez pas la fonctionnalit&#233; de mandataire avec la directive
      <code class="directive"><a href="#proxyrequests">ProxyRequests</a></code> avant
      d'avoir <a href="#access">s&#233;curis&#233; votre serveur</a>. Les serveurs
      mandataires ouverts sont dangereux pour votre r&#233;seau,
      mais aussi pour l'Internet au sens large.</p>
    </div>

    <p><code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> et ses modules associ&#233;s impl&#233;mentent
    un mandataire/passerelle pour le serveur HTTP Apache, et supportent
    de nombreux protocoles courants, ainsi que plusieurs algorithmes de
    r&#233;partition de charge. Le support de protocoles et d'algorithmes de
    r&#233;partition de charge suppl&#233;mentaires peut &#234;tre assur&#233; par des
    modules tiers.</p>

    <p>Un jeu de modules charg&#233;s dans le serveur permet de fournir les
    fonctionnalit&#233;s souhait&#233;es. Ces modules peuvent &#234;tre inclus
    statiquement &#224; la compilation, ou dynamiquement via la directive
    <code class="directive"><a href="../mod/mod_so.html#loadmodule">LoadModule</a></code>. Ce jeu de module
    doit comporter :</p>

    <ul>
      <li><code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code>, qui fournit les fonctionnalit&#233;s de
      base d'un mandataire</li>

      <li><code class="module"><a href="../mod/mod_proxy_balancer.html">mod_proxy_balancer</a></code> et un ou plusieurs modules
      de r&#233;partition, si la r&#233;partition de charge doit &#234;tre mise en
      oeuvre (Voir la documentation de
      <code class="module"><a href="../mod/mod_proxy_balancer.html">mod_proxy_balancer</a></code> pour plus de d&#233;tails).</li>

      <li>un ou plusieurs modules de types de mandataire, ou protocoles
      :

        <table class="bordered">
        <tr><th>Protocole</th><th>Module</th></tr>
        <tr><td>AJP13 (Protocole Apache JServe version
          1.3)</td><td><code class="module"><a href="../mod/mod_proxy_ajp.html">mod_proxy_ajp</a></code></td></tr>
        <tr><td>CONNECT (pour
          SSL)</td><td><code class="module"><a href="../mod/mod_proxy_connect.html">mod_proxy_connect</a></code></td></tr>
        <tr><td>FastCGI</td><td><code class="module"><a href="../mod/mod_proxy_fcgi.html">mod_proxy_fcgi</a></code></td></tr>
        <tr><td>ftp</td><td><code class="module"><a href="../mod/mod_proxy_ftp.html">mod_proxy_ftp</a></code></td></tr>
        <tr><td>HTTP/0.9, HTTP/1.0, et
          HTTP/1.1</td><td><code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code></td></tr>
        <tr><td>SCGI</td><td><code class="module"><a href="../mod/mod_proxy_scgi.html">mod_proxy_scgi</a></code></td></tr>
	<tr><td>WS and WSS (Web-sockets)</td><td><code class="module"><a href="../mod/mod_proxy_wstunnel.html">mod_proxy_wstunnel</a></code></td></tr>
        </table>
      </li>
    </ul>

    <p>En outre, d'autres modules fournissent des fonctionnalit&#233;s
    &#233;tendues. <code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code> et ses modules associ&#233;s
    fournissent la mise en cache. Les directives <code>SSLProxy*</code>
    du module <code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code> permettent de contacter des
    serveurs distants en utilisant le protocole SSL/TLS. Ces modules
    additionnels devront &#234;tre charg&#233;s et configur&#233;s pour pouvoir
    disposer de ces fonctionnalit&#233;s.</p>
</div>
<div id="quickview"><h3>Sujets</h3>
<ul id="topics">
<li><img alt="" src="../images/down.gif" /> <a href="#forwardreverse">Mandataires directs et
    mandataires/passerelles inverses</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#examples">Exemples simples</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#handler">Acc&#232;s via un gestionnaire</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#workers">Workers</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#access">Contr&#244;ler l'acc&#232;s &#224; votre
    mandataire</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#startup">Ralentissement au d&#233;marrage</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#intranet">Mandataire en Intranet</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#envsettings">Ajustements relatifs au
    protocole</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#request-bodies">Corps de requ&#234;tes</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#x-headers">En-t&#234;tes de requ&#234;te du mandataire
    inverse</a></li>
</ul><h3 class="directives">Directives</h3>
<ul id="toc">
<li><img alt="" src="../images/down.gif" /> <a href="#balancergrowth">BalancerGrowth</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#balancerinherit">BalancerInherit</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#balancermember">BalancerMember</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#balancerpersist">BalancerPersist</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#noproxy">NoProxy</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxy">&lt;Proxy&gt;</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyaddheaders">ProxyAddHeaders</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxybadheader">ProxyBadHeader</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyblock">ProxyBlock</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxydomain">ProxyDomain</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyerroroverride">ProxyErrorOverride</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyiobuffersize">ProxyIOBufferSize</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxymatch">&lt;ProxyMatch&gt;</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxymaxforwards">ProxyMaxForwards</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypass">ProxyPass</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypassinherit">ProxyPassInherit</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypassinterpolateenv">ProxyPassInterpolateEnv</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypassmatch">ProxyPassMatch</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypassreverse">ProxyPassReverse</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypassreversecookiedomain">ProxyPassReverseCookieDomain</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypassreversecookiepath">ProxyPassReverseCookiePath</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxypreservehost">ProxyPreserveHost</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyreceivebuffersize">ProxyReceiveBufferSize</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyremote">ProxyRemote</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyremotematch">ProxyRemoteMatch</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyrequests">ProxyRequests</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyset">ProxySet</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxysourceaddress">ProxySourceAddress</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxystatus">ProxyStatus</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxytimeout">ProxyTimeout</a></li>
<li><img alt="" src="../images/down.gif" /> <a href="#proxyvia">ProxyVia</a></li>
</ul>
<h3>Traitement des bugs</h3><ul class="seealso"><li><a href="https://www.apache.org/dist/httpd/CHANGES_2.4">Journal des modifications de httpd</a></li><li><a href="https://bz.apache.org/bugzilla/buglist.cgi?bug_status=__open__&amp;list_id=144532&amp;product=Apache%20httpd-2&amp;query_format=specific&amp;order=changeddate%20DESC%2Cpriority%2Cbug_severity&amp;component=mod_proxy">Probl&#232;mes connus</a></li><li><a href="https://bz.apache.org/bugzilla/enter_bug.cgi?product=Apache%20httpd-2&amp;component=mod_proxy">Signaler un bug</a></li></ul><h3>Voir aussi</h3>
<ul class="seealso">
<li><code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_ajp.html">mod_proxy_ajp</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_balancer.html">mod_proxy_balancer</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_connect.html">mod_proxy_connect</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_fcgi.html">mod_proxy_fcgi</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_ftp.html">mod_proxy_ftp</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_hcheck.html">mod_proxy_hcheck</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_scgi.html">mod_proxy_scgi</a></code></li>
<li><code class="module"><a href="../mod/mod_proxy_wstunnel.html">mod_proxy_wstunnel</a></code></li>
<li><code class="module"><a href="../mod/mod_ssl.html">mod_ssl</a></code></li>
<li><a href="#comments_section">Commentaires</a></li></ul></div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="forwardreverse" id="forwardreverse">Mandataires directs et
    mandataires/passerelles inverses</a><a title="Lien permanent" href="#forwardreverse" class="permalink">&para;</a></h2>
      <p>Le serveur HTTP Apache peut &#234;tre configur&#233; dans les deux modes mandataire
      <dfn>direct</dfn> et mandataire <dfn>inverse</dfn> (aussi nomm&#233;
      mode <dfn>passerelle</dfn>).</p>

      <p>Un <dfn>mandataire direct</dfn> standard est un serveur
      interm&#233;diaire qui s'intercale entre le client et le <em>serveur
      demand&#233;</em>. Pour obtenir un contenu h&#233;berg&#233; par
      le serveur demand&#233;, le client envoie une requ&#234;te au
      mandataire en nommant le serveur demand&#233; comme
      cible, puis le mandataire extrait le contenu depuis le
      serveur demand&#233; et le renvoie enfin au client. Le client doit &#234;tre
      configur&#233; de mani&#232;re appropri&#233;e pour pouvoir utiliser le mandataire
      direct afin d'acc&#233;der &#224; d'autres sites.</p>

      <p>L'acc&#232;s &#224; Internet depuis des clients situ&#233;s derri&#232;re un
      pare-feu est une utilisation typique du mandataire direct. Le
      mandataire direct peut aussi utiliser la mise en cache (fournie
      par <code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code>) pour r&#233;duire la charge du
      r&#233;seau.</p>

      <p>La fonctionnalit&#233; de mandataire direct est activ&#233;e via la
      directive <code class="directive"><a href="#proxyrequests">ProxyRequests</a></code>.
      Comme les mandataires directs permettent aux clients d'acc&#233;der &#224;
      des sites quelconques via votre serveur et de dissimuler leur
      v&#233;ritable origine, il est indispensable de <a href="#access">s&#233;curiser votre serveur</a> de fa&#231;on &#224; ce que seuls
      les clients autoris&#233;s puissent acc&#233;der &#224; votre serveur avant
      d'activer la fonctionnalit&#233; de mandataire direct.</p>

      <p>Un <dfn>mandataire inverse</dfn> (ou <dfn>passerelle</dfn>),
      quant &#224; lui, appara&#238;t au client comme un serveur web standard.
      Aucune configuration particuli&#232;re du client n'est n&#233;cessaire. Le
      client adresse ses demandes de contenus ordinaires dans l'espace
      de nommage du mandataire inverse. Ce dernier d&#233;cide alors o&#249;
      envoyer ces requ&#234;tes, et renvoie le contenu au client comme s'il
      l'h&#233;bergeait lui-m&#234;me.</p>

      <p>L'acc&#232;s d'utilisateurs depuis Internet vers un serveur situ&#233;
      derri&#232;re un pare-feu est une utilisation typique du mandataire
      inverse. On peut aussi utiliser les mandataires inverses pour
      mettre en oeuvre une r&#233;partition de charge entre plusieurs
      serveurs en arri&#232;re-plan, ou fournir un cache pour un serveur
      d'arri&#232;re-plan plus lent. Les mandataires inverses peuvent aussi
      tout simplement servir &#224; rassembler plusieurs serveurs dans le
      m&#234;me espace de nommage d'URLs.</p>

      <p>La fonctionnalit&#233; de mandataire inverse est activ&#233;e via la
      directive <code class="directive"><a href="#proxypass">ProxyPass</a></code> ou
      le drapeau <code>[P]</code> de la directive <code class="directive"><a href="../mod/mod_rewrite.html#rewriterule">RewriteRule</a></code>. Il n'est
      <strong>pas</strong> n&#233;cessaire de d&#233;finir <code class="directive"><a href="#proxyrequests">ProxyRequests</a></code> pour configurer
      un mandataire inverse.</p>
    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="examples" id="examples">Exemples simples</a><a title="Lien permanent" href="#examples" class="permalink">&para;</a></h2>

    <p>Les exemples ci-dessous illustrent de mani&#232;re tr&#232;s basique la
    mise en oeuvre de la fonctionnalit&#233; de mandataire et ne sont l&#224; que
    pour vous aider &#224; d&#233;marrer. Reportez-vous &#224; la documentation de
    chaque directive.</p>

    <p>Si en outre, vous d&#233;sirez activer la mise en cache, consultez la
    documentation de <code class="module"><a href="../mod/mod_cache.html">mod_cache</a></code>.</p>

    <div class="example"><h3>Mandataire inverse</h3><pre class="prettyprint lang-config">ProxyPass "/foo" "http://foo.example.com/bar"
ProxyPassReverse "/foo" "http://foo.example.com/bar"</pre>
</div>

    <div class="example"><h3>Mandataire direct</h3><pre class="prettyprint lang-config">ProxyRequests On
ProxyVia On

&lt;Proxy *&gt;
  Require host internal.example.com
&lt;/Proxy&gt;</pre>
</div>
    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="handler" id="handler">Acc&#232;s via un gestionnaire</a><a title="Lien permanent" href="#handler" class="permalink">&para;</a></h2>

    <p>Vous pouvez aussi forcer le traitement d'une requ&#234;te en tant que
    requ&#234;te de mandataire inverse en cr&#233;ant un gestionnaire de transfert
    appropri&#233;. Dans l'exemple suivant, toutes les requ&#234;tes pour
    des scripts PHP seront transmises au serveur FastCGI
    sp&#233;cifi&#233; via un mandat inverse :
    </p>

    <div class="example"><h3>Scripts PHP et mandataire inverse</h3><pre class="prettyprint lang-config">&lt;FilesMatch "\.php$"&gt;
    SetHandler  "proxy:unix:/path/to/app.sock|fcgi://localhost/"
&lt;/FilesMatch&gt;</pre>
</div>

      <p>Cette fonctionnalit&#233; est disponible &#224; partir de la version
      2.4.10 du serveur HTTP Apache.</p>

    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="workers" id="workers">Workers</a><a title="Lien permanent" href="#workers" class="permalink">&para;</a></h2>
      <p>Le mandataire g&#232;re la configuration et les param&#232;tres de
      communication des serveurs originaux au sein d'objets nomm&#233;s
      <dfn>workers</dfn>. Deux types de worker sont fournis : le worker
      par d&#233;faut du mandataire direct et le worker par d&#233;faut du
      mandataire inverse. Il est aussi possible de d&#233;finir explicitement
      des workers suppl&#233;mentaires.</p>

      <p>Les deux workers par d&#233;faut poss&#232;dent une configuration fig&#233;e
      et seront utilis&#233;s si aucun autre worker ne correspond &#224; la
      requ&#234;te. Ils ne r&#233;utilisent pas les connexions et n'utilisent pas les
      connexions HTTP persistantes (Keep-Alive). En effet, les
      connexions TCP vers le serveur original sont ferm&#233;es et ouvertes
      pour chaque requ&#234;te.</p>

      <p>Les workers d&#233;finis explicitement sont identifi&#233;s par leur URL.
      Ils sont en g&#233;n&#233;ral d&#233;finis via les directives <code class="directive"><a href="#proxypass">ProxyPass</a></code> ou <code class="directive"><a href="#proxypassmatch">ProxyPassMatch</a></code> lorsqu'on les
      utilise dans le cadre d'un mandataire inverse :</p>

      <div class="example"><pre class="prettyprint lang-config">ProxyPass "/example" "http://backend.example.com" connectiontimeout=5 timeout=30</pre>
</div>
      

      <p>Cette directive va cr&#233;er un worker associ&#233; &#224; l'URL du serveur original
      <code>http://backend.example.com</code>, qui utilisera les valeurs de
      timeout donn&#233;es. Toutes les sp&#233;cifications de timeouts utilisent la
      syntaxe <a href="directive-dict.html#Syntax">time-interval</a>. Lorsqu'ils
      sont utilis&#233;s dans le cadre d'un mandataire direct, les workers sont en
      g&#233;n&#233;ral d&#233;finis via la directive <code class="directive"><a href="#proxyset">ProxySet</a></code> :</p>

      <div class="example"><pre class="prettyprint lang-config">ProxySet http://backend.example.com connectiontimeout=5 timeout=30</pre>
</div>
      

      <p>ou encore via les directives <code class="directive"><a href="#proxy">Proxy</a></code> et <code class="directive"><a href="#proxyset">ProxySet</a></code> :</p>

      <pre class="prettyprint lang-config">&lt;Proxy http://backend.example.com&gt;
  ProxySet connectiontimeout=5 timeout=30
&lt;/Proxy&gt;</pre>


      <p>L'utilisation de workers d&#233;finis explicitement dans le mode
      mandataire direct n'est pas tr&#232;s courante, car les mandataires
      directs communiquent en g&#233;n&#233;ral avec de nombreux serveurs
      originaux. La cr&#233;ation explicite de workers pour certains serveurs
      originaux peut cependant s'av&#233;rer utile si ces serveurs sont
      tr&#232;s souvent sollicit&#233;s. A leur niveau, les workers explicitement
      d&#233;finis ne poss&#232;dent aucune notion de mandataire direct ou
      inverse. Ils encapsulent un concept de communication commun avec
      les serveurs originaux. Un worker cr&#233;&#233; via la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code> pour &#234;tre utilis&#233; dans le
      cadre d'un mandataire inverse sera aussi utilis&#233; dans le cadre
      d'un mandataire directe chaque fois que l'URL vers le serveur
      original correspondra &#224; l'URL du worker, et vice versa.</p>

      <p>L'URL qui identifie un worker correspond &#224; l'URL de son serveur
      original, y compris un &#233;ventuel chemin donn&#233; :</p>

      <pre class="prettyprint lang-config">ProxyPass "/examples" "http://backend.example.com/examples"
ProxyPass "/docs" "http://backend.example.com/docs"</pre>


      <p>Dans cet exemple, deux workers diff&#233;rents sont d&#233;finis, chacun
      d'eux utilisant des configurations et jeux de connexions
      s&#233;par&#233;s.</p>

      <div class="warning"><h3>Partage de workers</h3>
        <p>Le partage de workers intervient lorsque les URLs des workers
	s'entrecoupent, ce qui arrive lorsque l'URL d'un worker
	correspond au d&#233;but de l'URL d'un autre worker d&#233;fini plus loin
	dans le fichier de configuration. Dans l'exemple suivant,</p>

        <pre class="prettyprint lang-config">ProxyPass "/apps" "http://backend.example.com/" timeout=60
ProxyPass "/examples" "http://backend.example.com/examples" timeout=10</pre>


        <p>le second worker n'est pas vraiment cr&#233;&#233;. C'est le premier
	worker qui est en fait utilis&#233;. L'avantage de ceci r&#233;side dans
	le fait qu'il n'existe qu'un seul jeu de connexions, ces
	derni&#232;res &#233;tant donc r&#233;utilis&#233;es plus souvent. Notez que tous
	les attributs de configuration d&#233;finis explicitement pour le
	deuxi&#232;me worker seront ignor&#233;s, ce qui sera journalis&#233; en tant
	qu'avertissement. Ainsi, dans l'exemple ci-dessus, la valeur de
	timeout retenue pour l'URL <code>/exemples</code> sera
	<code>60</code>, et non <code>10</code> !</p>

        <p>Si vous voulez emp&#234;cher le partage de workers, classez vos
	d&#233;finitions de workers selon la longueur des URLs, de la plus
	longue &#224; la plus courte. Si au contraire vous voulez favoriser
	ce partage, utilisez l'ordre de classement inverse. Voir aussi
	l'avertissement &#224; propos de l'ordre de classement des directives
	<code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>

      </div> 

      <div class="warning"><h3>Nom d'h&#244;te dans l'URL</h3>
        <p>Le nom d'h&#244;te doit commencer par une lettre [a-z]. Par exemple :</p>
        <pre class="prettyprint lang-config">ProxyPass "/apps"     "http://127"</pre>

        <p>n'est pas valide et provoquera une erreur si une requ&#234;te correspond
	au chemin.</p>
      </div>

      <p>Les workers d&#233;finis explicitement sont de deux sortes :
      <dfn>workers directs</dfn> et <dfn>workers de r&#233;partition (de
      charge)</dfn>. Ils supportent de nombreux attributs de
      configuration importants d&#233;crits dans la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>. Ces m&#234;mes attributs
      peuvent aussi &#234;tre d&#233;finis via la directive <code class="directive"><a href="#proxyset">ProxySet</a></code>.</p>

      <p>Le jeu d'options disponibles pour un worker direct d&#233;pend du
      protocole sp&#233;cifi&#233; dans l'URL du serveur original. Les protocoles
      disponibles comprennent <code>ajp</code>, <code>fcgi</code>,
      <code>ftp</code>, <code>http</code> et <code>scgi</code>.</p>

      <p>Les workers de r&#233;partition sont des workers virtuels qui
      utilisent les workers directs, connus comme faisant partie de leurs
      membres, pour le traitement effectif des requ&#234;tes. Chaque
      r&#233;partiteur peut comporter plusieurs membres. Lorsqu'il traite une
      requ&#234;te, il choisit un de ses membres en fonction de l'algorithme
      de r&#233;partition de charge d&#233;fini.</p>

      <p>Un worker de r&#233;partition est cr&#233;&#233; si son URL de worker comporte
      <code>balancer</code> comme indicateur de protocole. L'URL du
      r&#233;partiteur permet d'identifier de mani&#232;re unique le worker de
      r&#233;partition. La directive <code class="directive"><a href="#balancermember">BalancerMember</a></code> permet d'ajouter des
      membres au r&#233;partiteur.</p>

      <div class="note"><h3>R&#233;solution DNS pour les domaines originaux</h3>
      <p>La r&#233;solution DNS s'effectue lorsque le socket vers le
      domaine original est cr&#233;&#233; pour la premi&#232;re fois. Lorsque la r&#233;utilisation
      des connexions est activ&#233;e, chaque domaine d'arri&#232;re-plan n'est r&#233;solu qu'une
      seule fois pour chaque processus enfant, et cette r&#233;solution est mise en
      cache pour toutes les connexions ult&#233;rieures jusqu'&#224; ce que le processus enfant
      soit recycl&#233;. Ce comportement doit &#234;tre pris en consid&#233;ration lorsqu'on
      planifie des t&#226;ches de maintenance du DNS impactant les domaines
      d'arri&#232;re-plan. Veuillez aussi vous reporter aux param&#232;tres de la
      directive <code class="directive"><a href="#proxypass">ProxyPass</a></code> pour plus de
      d&#233;tails &#224; propos de la r&#233;utilisation des connexions.
        </p>
      </div>

    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="access" id="access">Contr&#244;ler l'acc&#232;s &#224; votre
    mandataire</a><a title="Lien permanent" href="#access" class="permalink">&para;</a></h2>
      <p>Vous pouvez restreindre l'acc&#232;s &#224; votre mandataire via le bloc
      de contr&#244;le <code class="directive"><a href="#proxy">&lt;Proxy&gt;</a></code> comme dans
      l'exemple suivant :</p>

      <pre class="prettyprint lang-config">&lt;Proxy *&gt;
  Require ip 192.168.0
&lt;/Proxy&gt;</pre>


      <p>Pour plus de d&#233;tails sur les directives de contr&#244;le d'acc&#232;s,
      voir la documentation du module
      <code class="module"><a href="../mod/mod_authz_host.html">mod_authz_host</a></code>.</p>

      <p>Restreindre l'acc&#232;s de mani&#232;re stricte est essentiel si vous
      mettez en oeuvre un mandataire direct (en d&#233;finissant la directive
      <code class="directive"><a href="#proxyrequests">ProxyRequests</a></code> &#224; "on").
      Dans le cas contraire, votre serveur pourrait &#234;tre utilis&#233; par
      n'importe quel client pour acc&#233;der &#224; des serveurs quelconques,
      tout en masquant sa v&#233;ritable identit&#233;. Ceci repr&#233;sente un danger
      non seulement pour votre r&#233;seau, mais aussi pour l'Internet au
      sens large. Dans le cas de la mise en oeuvre d'un mandataire
      inverse (en utilisant la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code> avec <code>ProxyRequests Off</code>), le contr&#244;le
      d'acc&#232;s est moins critique car les clients ne peuvent contacter
      que les serveurs que vous avez sp&#233;cifi&#233;s.</p>

      <p><strong>Voir aussi</strong> la variable d'environnement <a href="mod_proxy_http.html#env">Proxy-Chain-Auth</a>.</p>

    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="startup" id="startup">Ralentissement au d&#233;marrage</a><a title="Lien permanent" href="#startup" class="permalink">&para;</a></h2>
      <p>Si vous utilisez la directive <code class="directive"><a href="#proxyblock">ProxyBlock</a></code>, les noms d'h&#244;tes sont r&#233;solus en adresses
      IP puis ces derni&#232;res mises en cache au cours du d&#233;marrage
      &#224; des fins de tests de comparaisons ult&#233;rieurs. Ce processus peut
      durer plusieurs secondes (ou d'avantage) en fonction de la vitesse
      &#224; laquelle s'effectue la r&#233;solution des noms d'h&#244;tes.</p>
    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="intranet" id="intranet">Mandataire en Intranet</a><a title="Lien permanent" href="#intranet" class="permalink">&para;</a></h2>
      <p>Un serveur mandataire Apache httpd situ&#233; &#224; l'int&#233;rieur d'un Intranet
      doit faire suivre les requ&#234;tes destin&#233;es &#224; un serveur externe &#224;
      travers le pare-feu de l'entreprise (pour ce faire, d&#233;finissez la
      directive <code class="directive"><a href="#proxyremote">ProxyRemote</a></code> de
      fa&#231;on &#224; ce qu'elle fasse suivre le <var>protocole</var> concern&#233;
      vers le mandataire du pare-feu). Cependant, lorsqu'il doit acc&#233;der
      &#224; des ressources situ&#233;es dans l'Intranet, il peut se passer du
      pare-feu pour acc&#233;der aux serveurs. A cet effet, la directive
      <code class="directive"><a href="#noproxy">NoProxy</a></code> permet de
      sp&#233;cifier quels h&#244;tes appartiennent &#224; l'Intranet et peuvent donc
      &#234;tre acc&#233;d&#233;s directement.</p>

      <p>Les utilisateurs d'un Intranet ont tendance &#224; oublier le nom du
      domaine local dans leurs requ&#234;tes WWW, et demandent par exemple
      "http://un-serveur/" au lieu de
      <code>http://un-serveur.example.com/</code>. Certains serveurs
      mandataires commerciaux acceptent ce genre de requ&#234;te et les
      traitent simplement en utilisant un nom de domaine local
      implicite. Lorsque la directive <code class="directive"><a href="#proxydomain">ProxyDomain</a></code> est utilis&#233;e et si le
      serveur est <a href="#proxyrequests">configur&#233; comme
      mandataire</a>, Apache httpd peut renvoyer une r&#233;ponse de redirection et
      ainsi fournir au client l'adresse de serveur correcte,
      enti&#232;rement qualifi&#233;e. C'est la m&#233;thode &#224; privil&#233;gier car le
      fichier des marque-pages de l'utilisateur contiendra alors des
      noms de serveurs enti&#232;rement qualifi&#233;s.</p>
    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="envsettings" id="envsettings">Ajustements relatifs au
    protocole</a><a title="Lien permanent" href="#envsettings" class="permalink">&para;</a></h2>
      <p>Pour les cas o&#249; <code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> envoie des requ&#234;tes
      vers un serveur qui n'impl&#233;mente pas correctement les connexions
      persistantes ou le protocole HTTP/1.1, il existe deux variables
      d'environnement qui permettent de forcer les requ&#234;tes &#224; utiliser
      le protocole HTTP/1.0 avec connexions non persistantes. Elles
      peuvent &#234;tre d&#233;finies via la directive <code class="directive"><a href="../mod/mod_env.html#setenv">SetEnv</a></code>.</p>

      <p>Il s'agit des variables <code>force-proxy-request-1.0</code> et
      <code>proxy-nokeepalive</code>.</p>

      <pre class="prettyprint lang-config">&lt;Location "/buggyappserver/"&gt;
  ProxyPass "http://buggyappserver:7001/foo/"
  SetEnv force-proxy-request-1.0 1
  SetEnv proxy-nokeepalive 1
&lt;/Location&gt;</pre>


      <p>A partir de la version 2.4.26 du serveur HTTP Apache, la d&#233;finition de
      la variable d'environnement "no-proxy" permet de d&#233;sactiver
      <code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> dans le traitement de la requ&#234;te courante.
      Cette variable doit &#234;tre d&#233;finie via la directive <code class="directive"><a href="../mod/mod_setenvif.html#setenvif">SetEnvIf</a></code> car la directive <code class="directive"><a href="../mod/mod_env.html#setenv">SetEnv</a></code> n'est pas &#233;valu&#233;e assez t&#244;t.</p>

    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="request-bodies" id="request-bodies">Corps de requ&#234;tes</a><a title="Lien permanent" href="#request-bodies" class="permalink">&para;</a></h2>

    <p>Certaines m&#233;thodes de requ&#234;tes comme POST comportent un corps de
    requ&#234;te. Le protocole HTTP stipule que les requ&#234;tes qui comportent
    un corps doivent soit utiliser un codage de transmission
    fractionn&#233;e (chunked transfer encoding), soit envoyer un en-t&#234;te de requ&#234;te
    <code>Content-Length</code>. Lorsqu'il fait suivre ce genre de
    requ&#234;te vers le serveur demand&#233;, <code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code>
    s'efforce toujours d'envoyer l'en-t&#234;te <code>Content-Length</code>.
    Par contre, si la taille du corps est importante, et si la requ&#234;te
    originale utilise un codage &#224; fractionnement, ce dernier peut aussi
    &#234;tre utilis&#233; dans la requ&#234;te montante. Ce comportement peut &#234;tre
    contr&#244;l&#233; &#224; l'aide de <a href="../env.html">variables
    d'environnement</a>. Ainsi, si elle est d&#233;finie, la variable
    <code>proxy-sendcl</code> assure une compatibilit&#233; maximale avec les
    serveurs demand&#233;s en imposant l'envoi de l'en-t&#234;te
    <code>Content-Length</code>, alors que
    <code>proxy-sendchunked</code> diminue la consommation de ressources
    en imposant l'utilisation d'un codage &#224; fractionnement.</p>

    <p>Dans certaines circonstances, le serveur doit mettre en file
    d'attente sur disque les corps de requ&#234;tes afin de satisfaire le
    traitement demand&#233; des corps de requ&#234;tes. Par exemple, cette mise en
    file d'attente se produira si le corps original a &#233;t&#233; envoy&#233; selon un
    codage morcel&#233; (et poss&#232;de une taille importante), alors que
    l'administrateur a demand&#233; que les requ&#234;tes du serveur
    d'arri&#232;re-plan soient envoy&#233;es avec l'en-t&#234;te Content-Length ou en
    HTTP/1.0. Cette mise en file d'attente se produira aussi si le corps
    de la requ&#234;te contient d&#233;j&#224; un en-t&#234;te Content-Length, alors que le
    serveur est configur&#233; pour filtrer les corps des requ&#234;tes entrantes.</p>

    <p>La directive <code class="directive"><a href="../mod/core.html#limitrequestbody">LimitRequestBody</a></code> ne s'applique qu'aux
    corps de requ&#234;tes que le serveur met en file d'attente sur disque.</p>

    </div><div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="section">
<h2><a name="x-headers" id="x-headers">En-t&#234;tes de requ&#234;te du mandataire
    inverse</a><a title="Lien permanent" href="#x-headers" class="permalink">&para;</a></h2>

    <p>Lorsqu'il est configur&#233; en mode mandataire inverse (en utilisant
    par exemple la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>),
    <code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code> ajoute plusieurs en-t&#234;tes de requ&#234;te
    afin de transmettre des informations au serveur demand&#233;. Ces
    en-t&#234;tes sont les suivants :</p>

    <dl>
      <dt><code>X-Forwarded-For</code></dt>
      <dd>L'adresse IP du client.</dd>
      <dt><code>X-Forwarded-Host</code></dt>
      <dd>L'h&#244;te d'origine demand&#233; par le client dans l'en-t&#234;te de
      requ&#234;te HTTP <code>Host</code>.</dd>
      <dt><code>X-Forwarded-Server</code></dt>
      <dd>Le nom d'h&#244;te du serveur mandataire.</dd>
    </dl>

    <p>Ces en-t&#234;tes doivent &#234;tre utilis&#233;s avec pr&#233;cautions sur le
    serveur demand&#233;, car ils contiendront plus d'une valeur (s&#233;par&#233;es
    par des virgules) si la requ&#234;te originale contenait d&#233;j&#224; un de ces
    en-t&#234;tes. Par exemple, vous pouvez utiliser
    <code>%{X-Forwarded-For}i</code> dans la cha&#238;ne de format du journal
    du serveur demand&#233; pour enregistrer les adresses IP des clients
    originaux, mais il est possible que vous obteniez plusieurs adresses
    si la requ&#234;te passe &#224; travers plusieurs mandataires.</p>

    <p>Voir aussi les directives <code class="directive"><a href="#proxypreservehost">ProxyPreserveHost</a></code> et <code class="directive"><a href="#proxyvia">ProxyVia</a></code> directives, qui permettent
    de contr&#244;ler d'autres en-t&#234;tes de requ&#234;te.</p>

    <p>Note : Si vous devez ajouter des en-t&#234;tes particuliers &#224; la
    requ&#234;te mandat&#233;e, utilisez la directive  <code class="directive"><a href="../mod/mod_headers.html#requestheader">RequestHeader</a></code>.</p>

   </div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="balancergrowth" id="balancergrowth">Directive</a> <a name="BalancerGrowth" id="BalancerGrowth">BalancerGrowth</a><a title="Lien permanent" href="#balancergrowth" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Nombre de membres suppl&#233;mentaires pouvant &#234;tre ajout&#233;s
apr&#232;s la configuration initiale</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>BalancerGrowth <var>#</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>BalancerGrowth 5</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>BalancerGrowth est disponible depuis la version 2.3.13 du
serveur HTTP Apache</td></tr>
</table>
    <p>Cette directive permet de d&#233;finir le nombre de
    r&#233;partiteurs de charge pouvant
    &#234;tre ajout&#233;s &#224; ceux d&#233;j&#224; configur&#233;s pour un
    serveur virtuel. Elle n'est active que si au minimum un r&#233;partiteur
    a &#233;t&#233; pr&#233;configur&#233;.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="balancerinherit" id="balancerinherit">Directive</a> <a name="BalancerInherit" id="BalancerInherit">BalancerInherit</a><a title="Lien permanent" href="#balancerinherit" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>H&#233;ritage des membres du groupes de r&#233;partition de
    charge du mandataire d&#233;finis au niveau du serveur principal</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>BalancerInherit On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>BalancerInherit On</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>Disponible &#224; partir de la version 2.4.5 du serveur
    HTTP Apache.</td></tr>
</table>
        <p>Cette directive permet d'attribuer au serveur virtuel courant
	l'h&#233;ritage des membres de groupes de r&#233;partition de charge
	d&#233;finis au niveau du serveur
	principal. Elle ne doit pas &#234;tre activ&#233;e si vous
	utilisez la fonctionnalit&#233; de modifications dynamiques du
	gestionnaire de r&#233;partition de charge (Balancer Manager) pour
	&#233;viter des probl&#232;mes et des comportements inattendus.</p>
        <p>Les d&#233;finitions au niveau du serveur principal constituent
	les d&#233;finitions par d&#233;faut au niveau des serveurs virtuels.</p>
	<p>La d&#233;sactivation de ProxyPassInherit d&#233;sactive aussi la
	directive <code class="directive"><a href="#balancerinherit">BalancerInherit</a></code>.</p>
    
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="balancermember" id="balancermember">Directive</a> <a name="BalancerMember" id="BalancerMember">BalancerMember</a><a title="Lien permanent" href="#balancermember" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Ajoute un membre &#224; un groupe de r&#233;partition de
charge</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>BalancerMember [<var>balancerurl</var>] <var>url</var> [<var>cl&#233;=valeur [cl&#233;=valeur ...]]</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet d'ajouter un membre &#224; un groupe de
    r&#233;partition de charge. Elle peut se trouver dans un conteneur
    <code>&lt;Proxy <var>balancer://</var>...&gt;</code>, et accepte
    tous les param&#232;tres de paires cl&#233;/valeur que supporte la directive
    <code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>
    <p>La directive <code class="directive">BalancerMember</code> accepte un param&#232;tre
    suppl&#233;mentaire : <var>loadfactor</var>. Il s'agit du facteur de
    charge du membre - un nombre entre 1.0 (valeur par d&#233;faut) et 100.0, qui
    d&#233;finit la charge &#224; appliquer au membre en question.</p>
    <p>L'argument <var>balancerurl</var> n'est requis que s'il ne se trouve pas
    d&#232;j&#224; dans la directive de conteneur <code>&lt;Proxy
    <var>balancer://</var>...&gt;</code>. Il correspond &#224; l'URL d'un
    r&#233;partiteur de charge d&#233;fini par une directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>
    <p>La partie chemin de l'URL du membre du groupe de r&#233;partition de
    charge dans toute directive de conteneur <code>&lt;Proxy
    <var>balancer://</var>...&gt;</code> est ignor&#233;e.</p>
    <p>Les slashes de fin doivent normalement &#234;tre supprim&#233;s de l'URL
    d'un <code class="directive">BalancerMember</code>.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="balancerpersist" id="balancerpersist">Directive</a> <a name="BalancerPersist" id="BalancerPersist">BalancerPersist</a><a title="Lien permanent" href="#balancerpersist" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Tente de conserver les changements effectu&#233;s par le
    gestionnaire de r&#233;partition de charge apr&#232;s un red&#233;marrage du
    serveur.</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>BalancerPersist On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>BalancerPersist Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>BalancerPersist n'est disponible qu'&#224; partir de la
    version 2.4.4 du serveur HTTP Apache.</td></tr>
</table>
        <p>Cette directive permet de conserver le contenu de l'espace
	m&#233;moire partag&#233; associ&#233; aux r&#233;partiteurs de charge et &#224; leurs
	membres apr&#232;s un red&#233;marrage du serveur. Ces modifications
	locales ne sont ainsi pas perdues lors des transitions d'&#233;tat
	dues &#224; un red&#233;marrage.</p>
    
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="noproxy" id="noproxy">Directive</a> <a name="NoProxy" id="NoProxy">NoProxy</a><a title="Lien permanent" href="#noproxy" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Serveurs, domaines ou r&#233;seaux auquels on se connectera
directement</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>NoProxy <var>domaine</var> [<var>domaine</var>] ...</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive n'a d'utilit&#233; que pour les serveurs mandataires
    Apache httpd au sein d'Intranets. La directive
    <code class="directive">NoProxy</code> permet de sp&#233;cifier une liste de
    sous-r&#233;seaux, d'adresses IP, de serveurs et/ou de domaines s&#233;par&#233;s
    par des espaces. Une requ&#234;te pour un serveur qui correspond &#224; un ou
    plusieurs crit&#232;res sera toujours servie par ce serveur directement,
    sans &#234;tre redirig&#233;e vers le(s) serveur(s) mandataire(s) d&#233;fini(s) par
    la directive <code class="directive"><a href="#proxyremote">ProxyRemote</a></code>.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyRemote  *  http://firewall.example.com:81
NoProxy         .example.com 192.168.112.0/21</pre>
</div>

    <p>Le type des arguments <var>serveur</var> de la directive
    <code class="directive">NoProxy</code> appartiennent &#224; la liste suivante
    :</p>

    <dl>
    
    <dt><var><a name="domain" id="domain">Domaine</a></var></dt>
    <dd>
    <p>Un <dfn>domaine</dfn> est ici un nom de domaine DNS partiellement
    qualifi&#233; pr&#233;c&#233;d&#233; d'un point. Il repr&#233;sente une liste de serveurs qui
    appartiennent logiquement au m&#234;me domaine ou &#224; la m&#234;me zonz DNS
    (en d'autres termes, les nom des serveurs se terminent tous par
    <var>domaine</var>).</p>

    <div class="example"><h3>Exemple</h3><p><code>
      .com .example.org.
    </code></p></div>

    <p>Pour faire la distinction entre <var>domaine</var>s et <var><a href="#hostname">nom d'h&#244;te</a></var>s (des points de vue &#224; la fois
    syntaxique et
    s&#233;mantique, un domaine DNS pouvant aussi avoir un enregistrement DNS
    de type A !), les <var>domaine</var>s sont toujours sp&#233;cifi&#233;s en les
    pr&#233;fixant par un point.</p>

    <div class="note"><h3>Note</h3>
      <p>Les comparaisons de noms de domaines s'effectuent sans tenir
      compte de la casse, et les parties droites des <var>Domaine</var>s
      sont toujours cens&#233;es correspondre &#224; la racine de l'arborescence
      DNS, si bien que les domaines <code>.ExEmple.com</code> et
      <code>.example.com.</code> (notez le point &#224; la fin du nom) sont
      consid&#233;r&#233;s comme identiques. Comme une comparaison de domaines ne
      n&#233;cessite pas de recherche DNS, elle est beaucoup plus efficace
      qu'une comparaison de sous-r&#233;seaux.</p>
    </div></dd>

    
    <dt><var><a name="subnet" id="subnet">Sous-r&#233;seau</a></var></dt>
    <dd>
    <p>Un <dfn>Sous-r&#233;seau</dfn> est une adresse internet partiellement
    qualifi&#233;e sous forme num&#233;rique (quatre nombres s&#233;par&#233;s par des
    points), optionnellement suivie d'un slash et du masque de
    sous-r&#233;seau sp&#233;cifiant le nombre de bits significatifs dans le
    <var>Sous-r&#233;seau</var>. Il repr&#233;sente un sous-r&#233;seau de serveurs qui
    peuvent &#234;tre atteints depuis la m&#234;me interface r&#233;seau. En l'absence
    de masque de sous-r&#233;seau explicite, il est sous-entendu que les
    digits manquants (ou caract&#232;res 0) de fin sp&#233;cifient le masque de
    sous-r&#233;seau (Dans ce cas, le masque de sous-r&#233;seau ne peut &#234;tre
    qu'un multiple de 8). Voici quelques exemples :</p>

    <dl>
    <dt><code>192.168</code> ou <code>192.168.0.0</code></dt>
    <dd>le sous-r&#233;seau 192.168.0.0 avec un masque de sous-r&#233;seau
    implicite de 16 bits significatifs (parfois exprim&#233; sous la forme
    <code>255.255.0.0</code>)</dd>
    <dt><code>192.168.112.0/21</code></dt>
    <dd>le sous-r&#233;seau <code>192.168.112.0/21</code> avec un masque de
    sous-r&#233;seau implicite de 21 bits significatifs (parfois exprim&#233;
    sous la forme<code>255.255.248.0</code>)</dd>
    </dl>

    <p>Comme cas extr&#234;mes, un <em>Sous-r&#233;seau</em> avec un masque de
    sous-r&#233;seau de 32 bits significatifs est &#233;quivalent &#224; une <var><a href="#ipaddr">adresse IP</a></var>, alors qu'un <em>Sous-r&#233;seau</em> avec un masque de
    sous-r&#233;seau de 0 bit significatif (c'est &#224; dire 0.0.0.0/0) est
    identique &#224; la constante <var>_Default_</var>, et peut correspondre
    &#224; toute adresse IP.</p></dd>

    
    <dt><var><a name="ipaddr" id="ipaddr">Adresse IP</a></var></dt>
    <dd>
    <p>Une <dfn>Adresse IP</dfn> est une adresse internet pleinement
    qualifi&#233;e sous forme num&#233;rique (quatre nombres s&#233;par&#233;s par des
    points). En g&#233;n&#233;ral, cette adresse repr&#233;sente un serveur, mais elle
    ne doit pas n&#233;cessairement correspondre &#224; un nom de domaine DNS.</p>
    <div class="example"><h3>Exemple</h3><p><code>
      192.168.123.7
    </code></p></div>

    <div class="note"><h3>Note</h3>
      <p>Une <dfn>Adresse IP</dfn> ne n&#233;cessite pas de r&#233;solution DNS,
      et peut ainsi s'av&#233;rer plus efficace quant aux performances
      d'Apache.</p>
    </div></dd>

    
    <dt><var><a name="hostname" id="hostname">Nom de serveur</a></var></dt>
    <dd>
    <p>Un <dfn>Nom de serveur</dfn> est un nom de domaine DNS pleinement
    qualifi&#233; qui peut &#234;tre r&#233;solu en une ou plusieurs adresses IP par le
    service de noms de domaines DNS. Il repr&#233;sente un h&#244;te logique (par
    opposition aux <var><a href="#domain">Domaine</a></var>s, voir
    ci-dessus), et doit pouvoir &#234;tre r&#233;solu en une ou plusieurs <var><a href="#ipaddr">adresses IP</a></var> (ou souvent en une liste
    d'h&#244;tes avec diff&#233;rentes <var><a href="#ipaddr">adresses
    IP</a></var>).</p>

    <div class="example"><h3>Exemples</h3><p><code>
      prep.ai.example.edu<br />
      www.example.org
    </code></p></div>

    <div class="note"><h3>Note</h3>
      <p>Dans de nombreuses situations, il est plus efficace de
      sp&#233;cifier une <var><a href="#ipaddr">adresse IP</a></var> qu'un
      <var>Nom de serveur</var> car cela &#233;vite d'avoir &#224; effectuer une
      recherche DNS. La r&#233;solution de nom dans Apache httpd peut prendre un
      temps tr&#232;s long lorsque la connexion avec le serveur de noms
      utilise une liaison PPP lente.</p>
      <p>Les comparaisons de <var>Nom de serveur</var> s'effectuent sans tenir
      compte de la casse, et les parties droites des <var>Noms de serveur</var>
      sont toujours cens&#233;es correspondre &#224; la racine de l'arborescence
      DNS, si bien que les domaines <code>WWW.ExEmple.com</code> et
      <code>www.example.com.</code> (notez le point &#224; la fin du nom) sont
      consid&#233;r&#233;s comme identiques.</p>
     </div></dd>
    </dl>

<h3>Voir aussi</h3>
<ul>
<li><a href="../dns-caveats.html">Probl&#232;mes li&#233;s au DNS</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxy" id="proxy">Directive</a> <a name="Proxy" id="Proxy">&lt;Proxy&gt;</a><a title="Lien permanent" href="#proxy" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Conteneur de directives s'appliquant &#224; des ressources
mandat&#233;es</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>&lt;Proxy <var>url-avec-jokers</var>&gt; ...&lt;/Proxy&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Les directives situ&#233;es dans une section <code class="directive">&lt;Proxy&gt;</code> ne s'appliquent qu'au contenu
    mandat&#233; concern&#233;. Les jokers de style shell sont autoris&#233;s.</p>

    <p>Par exemple, les lignes suivantes n'autoriseront &#224; acc&#233;der &#224; un
    contenu via votre serveur mandataire que les h&#244;tes appartenant &#224;
    <code>votre-reseau.example.com</code> :</p>

    <pre class="prettyprint lang-config">&lt;Proxy *&gt;
  Require host votre-reseau.example.com
&lt;/Proxy&gt;</pre>


    <p>Dans l'exemple suivant, tous les fichiers du r&#233;pertoire
    <code>foo</code> de <code>example.com</code> seront trait&#233;s par le
    filtre <code>INCLUDES</code> lorsqu'ils seront envoy&#233;s par
    l'interm&#233;diaire du serveur mandataire :</p>

    <pre class="prettyprint lang-config">&lt;Proxy http://example.com/foo/*&gt;
  SetOutputFilter INCLUDES
&lt;/Proxy&gt;</pre>


    <p>Dans l'exemple suivant, les clients web poss&#233;dant l'adresse IP
    sp&#233;cifi&#233;e seront autoris&#233;s &#224; effectuer des requ&#234;tes
    <code>CONNECT</code> pour acc&#233;der au serveur
    <code>https://www.example.com/</code>, sous r&#233;serve que le module
    <code class="module"><a href="../mod/mod_proxy_connect.html">mod_proxy_connect</a></code> soit charg&#233;.
    </p>

   <pre class="prettyprint lang-config">&lt;Proxy www.example.com:443&gt;
  Require ip 192.168.0.0/16
&lt;/Proxy&gt;</pre>


    <div class="note"><h3>Diff&#233;rences avec la section de configuration Location</h3>
      <p>Une URL d'arri&#232;re-plan sera concern&#233;e par le conteneur Proxy si
      elle commence par la <var>url-avec-jokers</var>, m&#234;me si le
      dernier segment de chemin de la directive ne correspond qu'&#224; un
      pr&#233;fixe de segment dee chemin de l'URL d'arri&#232;re-plan. Par exemple, &lt;Proxy
      http://example.com/foo&gt; correspondra entre autres aux URLs
      http://example.com/foo, http://example.com/foo/bar, et
      http://example.com/foobar. La correspondance de l'URL finale
      diff&#232;re du comportement de la section <code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code> qui, pour le cas de cette note,
      traitera le segment de chemin final comme s'il se terminait par un
      slash.</p>
      <p>Pour un contr&#244;le plus fin de la correspondance des URL, voir la
      directive <code class="directive">&lt;ProxyMatch&gt;</code>.</p>
    </div>


<h3>Voir aussi</h3>
<ul>
<li><code class="directive"><a href="#proxymatch">&lt;ProxyMatch&gt;</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyaddheaders" id="proxyaddheaders">Directive</a> <a name="ProxyAddHeaders" id="ProxyAddHeaders">ProxyAddHeaders</a><a title="Lien permanent" href="#proxyaddheaders" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Ajoute des informations &#224; propos du mandataire aux
en-t&#234;tes X-Forwarded-*</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyAddHeaders Off|On</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyAddHeaders On</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>Disponible depuis la version 2.3.10</td></tr>
</table>
    <p>Cette directive permet de passer au serveur d'arri&#232;re-plan des
    informations &#224; propos du mandataire via les en-t&#234;tes HTTP
    X-Forwarded-For, X-Forwarded-Host et X-Forwarded-Server.</p>
    <div class="note"><h3>Utilit&#233;</h3>
     <p>Cette option n'est utile que dans le cas du mandat HTTP trait&#233;
     par <code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code>.</p>
    </div>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxybadheader" id="proxybadheader">Directive</a> <a name="ProxyBadHeader" id="ProxyBadHeader">ProxyBadHeader</a><a title="Lien permanent" href="#proxybadheader" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>D&#233;termine la mani&#232;re de traiter les lignes d'en-t&#234;te
incorrectes d'une r&#233;ponse</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyBadHeader IsError|Ignore|StartBody</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyBadHeader IsError</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">ProxyBadHeader</code> permet de
    d&#233;terminer le comportement de <code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> lorsqu'il
    re&#231;oit des lignes d'en-t&#234;te de r&#233;ponse dont la syntaxe n'est pas valide (c'est
    &#224; dire ne contenant pas de caract&#232;re ':') en provenance du serveur
    original. Les arguments disponibles sont :</p>

    <dl>
    <dt><code>IsError</code></dt>
    <dd>Annule la requ&#234;te et renvoie une r&#233;ponse de code 502 (mauvaise
    passerelle). C'est le comportement par d&#233;faut.</dd>

    <dt><code>Ignore</code></dt>
    <dd>Traite les lignes d'en-t&#234;te incorrectes comme si elles n'avaient
    pas &#233;t&#233; envoy&#233;es.</dd>

    <dt><code>StartBody</code></dt>
    <dd>A la r&#233;ception de la premi&#232;re ligne d'en-t&#234;te incorrecte, les
    autres en-t&#234;tes sont lus et ce qui reste est trait&#233; en tant que
    corps. Ceci facilite la prise en compte des serveurs d'arri&#232;re-plan
    bogu&#233;s qui oublient d'ins&#233;rer une ligne vide entre les
    en-t&#234;tes et le corps.</dd>
    </dl>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyblock" id="proxyblock">Directive</a> <a name="ProxyBlock" id="ProxyBlock">ProxyBlock</a><a title="Lien permanent" href="#proxyblock" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Interdit les requ&#234;tes mandat&#233;es vers certains h&#244;tes</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyBlock *|<var>nom d'h&#244;te</var>|<var>nom d'h&#244;te partiel</var>
[<var>nom d'h&#244;te</var>|<var>nom d'h&#244;te partiel</var>]...</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">ProxyBlock</code> permet d'interdire
    l'acc&#232;s FTP ou HTTP via le mandataire &#224; certains h&#244;tes en fonction
    d'une correspondance exacte ou partielle avec un nom d'h&#244;te, ou dans
    la mesure du possible en fonction d'une comparaison d'adresses IP.</p>

    <p>Chaque param&#232;tre de la directive
    <code class="directive">ProxyBlock</code> accepte comme valeur soit
    <code>*</code>, soit une cha&#238;ne alphanum&#233;rique. Au d&#233;marrage, le
    module tente de r&#233;soudre toute cha&#238;ne alphanum&#233;rique depuis un nom
    DNS vers un jeu d'adresses IP, mais toute erreur de DNS est ignor&#233;e.</p>

    <p>Si un param&#232;tre a pour valeur "<code>*</code>",
    <code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> interdira l'acc&#232;s &#224; tout site FTP ou
    HTTP.</p>

    <p>Dans le cas contraire, pour toute requ&#234;te vers une ressource FTP
    ou HTTP via le mandataire, <code class="module"><a href="../mod/mod_proxy.html">mod_proxy</a></code> va comparer le
    nom d'h&#244;te de l'URI de la requ&#234;te avec chaque cha&#238;ne alphanum&#233;rique
    sp&#233;cifi&#233;e. Si une cha&#238;ne correspond, m&#234;me partiellement, l'acc&#232;s est
    refus&#233;. Si aucune cha&#238;ne ne correspond, et si un mandataire distant
    (forward) est configur&#233; via la directive
    <code class="directive">ProxyRemote</code> ou
    <code class="directive">ProxyRemoteMatch</code>, l'acc&#232;s est autoris&#233;. Si
    aucun mandataire distant (forward) n'est configur&#233;, l'adresse IP
    correspondant au nom d'h&#244;te de l'URI est compar&#233;e &#224; toutes les
    adresses IP r&#233;solues au d&#233;marrage, et l'acc&#232;s est refus&#233; si une
    correspondance est trouv&#233;e.</p>

    <p>Notez que les recherches DNS peuvent ralentir le processus de
    d&#233;marrage du serveur.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyBlock news.example.com auctions.example.com friends.example.com</pre>
</div>

    <p>Notez qu'<code>example</code> suffirait aussi pour atteindre
    ces sites.</p>

    <p>Hosts conviendrait aussi s'il &#233;tait r&#233;f&#233;renc&#233; par adresse IP.</p>

    <p>Notez aussi que</p>

    <pre class="prettyprint lang-config">ProxyBlock *</pre>


    <p>bloque les connexions vers tous les sites.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxydomain" id="proxydomain">Directive</a> <a name="ProxyDomain" id="ProxyDomain">ProxyDomain</a><a title="Lien permanent" href="#proxydomain" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Nom de domaine par d&#233;faut pour les requ&#234;tes
mandat&#233;es</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyDomain <var>Domaine</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive n'a d'utilit&#233; que pour les serveurs mandataires
    Apache httpd au sein d'un Intranet. La directive
    <code class="directive">ProxyDomain</code> permet de sp&#233;cifier le domaine
    par d&#233;faut auquel le serveur mandataire apache appartient. Si le
    serveur re&#231;oit une requ&#234;te pour un h&#244;te sans nom de domaine, il va
    g&#233;n&#233;rer une r&#233;ponse de redirection vers le m&#234;me h&#244;te suffix&#233; par le
    <var>Domaine</var> sp&#233;cifi&#233;.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyRemote  "*"  "http://firewall.example.com:81"
NoProxy           ".example.com" "192.168.112.0/21"
ProxyDomain       ".example.com"</pre>
</div>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyerroroverride" id="proxyerroroverride">Directive</a> <a name="ProxyErrorOverride" id="ProxyErrorOverride">ProxyErrorOverride</a><a title="Lien permanent" href="#proxyerroroverride" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Outrepasser les pages d'erreur pour les contenus
mandat&#233;s</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyErrorOverride On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyErrorOverride Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive est utile pour les configurations de mandataires
    inverses, lorsque vous souhaitez que les pages d'erreur envoy&#233;es
    aux utilisateurs finaux pr&#233;sentent un aspect homog&#232;ne. Elle permet
    aussi l'inclusion de fichiers (via les SSI de
    <code class="module"><a href="../mod/mod_include.html">mod_include</a></code>) pour obtenir le code d'erreur et agir
    en cons&#233;quence (le comportement par d&#233;faut afficherait la page
    d'erreur du serveur mandat&#233;, alors que c'est le message d'erreur SSI
    qui sera affich&#233; si cette directive est &#224; "on").</p>

    <p>Cette directive n'affecte pas le traitement des r&#233;ponses
    informatives (1xx), de type succ&#232;s normal (2xx), ou de redirection
    (3xx).</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyiobuffersize" id="proxyiobuffersize">Directive</a> <a name="ProxyIOBufferSize" id="ProxyIOBufferSize">ProxyIOBufferSize</a><a title="Lien permanent" href="#proxyiobuffersize" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>D&#233;termine la taille du tampon interne de transfert de
donn&#233;es</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyIOBufferSize <var>octets</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyIOBufferSize 8192</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">ProxyIOBufferSize</code> permet
    d'ajuster la taille du tampon interne utilis&#233; comme bloc-note pour
    les transferts de donn&#233;es entre entr&#233;e et sortie. La taille minimale
    est de <code>512</code> octets.</p>

    <p>Dans la plupart des cas, il n'y a aucune raison de modifier cette
    valeur.</p>

    <p>Si elle est utilis&#233;e avec AJP, cette directive permet de d&#233;finir
    la taille maximale du paquet AJP en octets. Si la valeur sp&#233;cifi&#233;e
    est sup&#233;rieure &#224; 65536, elle est corrig&#233;e et prend la valeur 65536.    
    Si vous ne conservez pas
    la valeur par d&#233;faut, vous devez aussi modifier l'attribut
    <code>packetSize</code> de votre connecteur AJP du c&#244;t&#233; de Tomcat !
    L'attribut <code>packetSize</code> n'est disponible que dans Tomcat
    <code>5.5.20+</code> et <code>6.0.2+</code>.</p>
    <p>Il n'est normalement pas n&#233;cessaire de modifier la taille
    maximale du paquet. Des probl&#232;mes ont cependant &#233;t&#233; rapport&#233;s avec
    la valeur par d&#233;faut lors de l'envoi de certificats ou de cha&#238;nes de
    certificats.</p>


</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxymatch" id="proxymatch">Directive</a> <a name="ProxyMatch" id="ProxyMatch">&lt;ProxyMatch&gt;</a><a title="Lien permanent" href="#proxymatch" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Conteneur de directives s'appliquant &#224; des ressources
mandat&#233;es correspondant &#224; une expression rationnelle</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>&lt;ProxyMatch <var>regex</var>&gt; ...&lt;/ProxyMatch&gt;</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">&lt;ProxyMatch&gt;</code> est
    identique &#224; la directive <code class="directive"><a href="#proxy">&lt;Proxy&gt;</a></code>, &#224; l'exception qu'elle d&#233;finit
    les URLs auxquelles elle s'applique en utilisant une <a class="glossarylink" href="../glossary.html#regex" title="voir glossaire">expression rationnelle</a>.</p>

    <p>A partir de la version 2.4.8, les groupes nomm&#233;s et les
    r&#233;f&#233;rences arri&#232;res sont extraits et enregistr&#233;s dans
    l'environnement avec leur nom en majuscules et pr&#233;fix&#233; par "MATCH_". Ceci permet
    de r&#233;f&#233;rencer des URLs dans des <a href="../expr.html">expressions</a>
    ou au sein de modules comme <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>. Pour
    &#233;viter toute confusion, les r&#233;f&#233;rences arri&#232;res num&#233;rot&#233;es (non
    nomm&#233;es) sont ignor&#233;es. Vous devez utiliser &#224; la place des groupes
    nomm&#233;s.</p>

<pre class="prettyprint lang-config">&lt;ProxyMatch ^http://(?&lt;sitename&gt;[^/]+)&gt;
    require ldap-group cn=%{env:MATCH_SITENAME},ou=combined,o=Example
&lt;/ProxyMatch&gt;</pre>


<h3>Voir aussi</h3>
<ul>
<li><code class="directive"><a href="#proxy">&lt;Proxy&gt;</a></code></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxymaxforwards" id="proxymaxforwards">Directive</a> <a name="ProxyMaxForwards" id="ProxyMaxForwards">ProxyMaxForwards</a><a title="Lien permanent" href="#proxymaxforwards" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Nombre maximum de mandataires &#224; travers lesquelles une
requ&#234;te peut &#234;tre redirig&#233;e</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyMaxForwards <var>nombre</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyMaxForwards -1</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">ProxyMaxForwards</code> permet de
    sp&#233;cifier le nombre maximum de mandataires &#224; travers lesquels une
    requ&#234;te peut passer dans le cas o&#249; la la requ&#234;te ne contient pas
    d'en-t&#234;te <code>Max-Forwards</code>. Ceci permet de se pr&#233;munir
    contre les boucles infinies de mandataires ou contre les attaques de
    type d&#233;ni de service.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyMaxForwards 15</pre>
</div>

    <p>Notez que la d&#233;finition de la directive
    <code class="directive">ProxyMaxForwards</code> constitue une violation du
    protocole HTTP/1.1 (RFC2616), qui interdit &#224; un mandataire de
    d&#233;finir <code>Max-Forwards</code> si le client ne l'a pas fait
    lui-m&#234;me. Les versions pr&#233;c&#233;dentes d'Apache httpd la d&#233;finissaient
    syst&#233;matiquement. Une valeur n&#233;gative de
    <code class="directive">ProxyMaxForwards</code>, y compris la valeur par
    d&#233;faut -1, implique un comportement compatible avec le protocole,
    mais vous expose aux bouclages infinis.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypass" id="proxypass">Directive</a> <a name="ProxyPass" id="ProxyPass">ProxyPass</a><a title="Lien permanent" href="#proxypass" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>R&#233;f&#233;rencer des serveurs distants depuis
l'espace d'URLs du serveur local</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPass [<var>chemin</var>] !|<var>url</var> [<var>cl&#233;=valeur</var>
  <var>[cl&#233;=valeur</var> ...]] [nocanon] [interpolate] [noquery]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>Les Sockets de style Unix (Unix Domain Socket - UDS) sont support&#233;s &#224; partir
de la version 2.4.7 du serveur HTTP Apache</td></tr>
</table>
    <p>Cette directive permet de r&#233;f&#233;rencer des serveurs distants depuis
    l'espace d'URLs du serveur local ; le serveur
    local n'agit pas en tant que mandataire au sens conventionnel, mais
    plut&#244;t comme miroir du serveur distant. Le serveur local est
    souvent nomm&#233; <dfn>mandataire inverse</dfn> ou
    <dfn>passerelle</dfn>. L'argument <var>chemin</var> est le nom d'un
    chemin virtuel local ; <var>url</var> est une URL partielle pour le
    serveur distant et ne doit pas contenir de cha&#238;ne d'arguments.</p>

    <div class="note">Il est fortement recommand&#233; de revoir le concept de <a href="#workers">Worker</a> avant d'aller plus loin.</div>

    <div class="note">Cette directive n'est pas support&#233;e au sein
    des sections <code class="directive"><a href="../mod/core.html#directory">&lt;Directory&gt;</a></code>
    et <code class="directive"><a href="../mod/core.html#files">&lt;Files&gt;</a></code>.</div>

    <div class="warning">En g&#233;n&#233;ral, la directive <code class="directive"><a href="#proxyrequests">ProxyRequests</a></code> doit &#234;tre d&#233;finie &#224;
    <strong>off</strong> lorsqu'on utilise la directive
    <code class="directive">ProxyPass</code>.</div>

    <p>Les sockets de style Unix sont support&#233;s &#224; partir de la version
    2.4.7 du serveur HTTP Apache ; pour utiliser cette fonctionnalit&#233;,
    il suffit d'utiliser une URL cible pr&#233;fix&#233;e par
    <code>unix:/path/lis.sock|</code>. Par exemple, pour mandater HTTP
    et cibler l'UDS /home/www/socket, vous devez utiliser
    <code>unix:/home/www.socket|http://localhost/whatever/</code>. Comme
    le socket est local, le nom d'h&#244;te utilis&#233; (ici
    <code>localhost</code>) peut &#234;tre sujet &#224; discussion, mais il est
    transmis dans l'en-t&#234;te Host: de la requ&#234;te.</p>

    <div class="note"><strong>Note :</strong>Le chemin associ&#233; &#224; l'URL
    <code>unix:</code> tient compte de la directive
    <code class="directive">DefaultRuntimeDir</code>.</div>

    <div class="note"><strong>Note :</strong>Afin d'&#233;viter l'&#233;chappement du
    caract&#232;re <code>'|'</code>, la directive
    <code class="directive">RewriteRule</code> doit poss&#233;der l'option
    <code>[P,NE]</code>.</div>

    <p>Lorsque la directive ProxyPass est utilis&#233;e &#224; l'int&#233;rieur d'une
    section <code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code>, le premier argument est omis et le r&#233;pertoire
    local est obtenu &#224; partir de la section <code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code>. Il en sera de m&#234;me dans une
    section <code class="directive"><a href="../mod/core.html#locationmatch">&lt;LocationMatch&gt;</a></code> ; cependant, ProxyPass
    n'interpr&#232;te pas les expressions rationnelles, et il sera ici
    n&#233;cessaire d'utiliser la directive
    <code class="directive">ProxyPassMatch</code> &#224; la place.</p>
    
    <p>Supposons que le serveur local a pour adresse
    <code>http://example.com/</code> ; alors la ligne</p>

    <pre class="prettyprint lang-config">&lt;Location "/mirror/foo/"&gt;
    ProxyPass "http://backend.example.com/"
&lt;/Location&gt;</pre>


    <p>va convertir en interne toute requ&#234;te pour
    <code>http://example.com/mirror/foo/bar</code> en une requ&#234;te
    mandat&#233;e pour <code>http://backend.example.com/bar</code>.</p>

    <p>Si vous avez besoin d'un configuration de mandataire inverse plus
    souple, reportez-vous &#224; la documentation de la directive <code class="directive"><a href="../mod/mod_rewrite.html#rewriterule">RewriteRule</a></code> et son drapeau
    <code>[P]</code>.</p>

    <p>La syntaxe alternative suivante est valide, bien qu'elle puisse
    induire une d&#233;gradation des performances lorsqu'elle est
    pr&#233;sente en tr&#232;s grand nombre. Elle poss&#232;de l'avantage de
    permettre un contr&#244;le dynamique via l'interface <a href="mod_proxy_balancer.html#balancer_manager">Balancer Manager</a> :</p>

    <pre class="prettyprint lang-config">ProxyPass "/mirror/foo/" "http://backend.example.com/"</pre>


    <div class="warning">
    <p>Si le premier argument se termine par un slash
    <strong>/</strong>, il doit en &#234;tre de m&#234;me pour le second argument
    et vice versa. Dans le cas contraire, il risque de manquer des
    slashes n&#233;cessaires dans la requ&#234;te r&#233;sultante vers le serveur
    d'arri&#232;re-plan et les r&#233;sulats ne seront pas ceux attendus.
    </p>
    </div>

    <p>Le drapeau <code>!</code> permet de soustraire un sous-r&#233;pertoire
    du mandat inverse, comme dans l'exemple suivant :</p>

    <pre class="prettyprint lang-config">&lt;Location "/mirror/foo/"&gt;
    ProxyPass "http://backend.example.com/"
&lt;/Location&gt;
&lt;Location "/mirror/foo/i"&gt;
    ProxyPass "!"
&lt;/Location&gt;</pre>


    <pre class="prettyprint lang-config">ProxyPass "/mirror/foo/i" "!"
ProxyPass "/mirror/foo" "http://backend.example.com"</pre>


    <p>va mandater toutes les requ&#234;tes pour <code>/mirror/foo</code>
    vers <code>backend.example.com</code>, <em>sauf</em> les requ&#234;tes
    pour <code>/mirror/foo/i</code>.</p>

    <p>M&#233;langer plusieurs configurations ProxyPass dans diff&#233;rents contextes ne
    fonctionne pas :</p>
    <pre class="prettyprint lang-config">ProxyPass "/mirror/foo/i" "!"
&lt;Location "/mirror/foo/"&gt;
    ProxyPass "http://backend.example.com/"
&lt;/Location&gt;</pre>

    <p>Dans ce cas, une requ&#234;te pour <code>/mirror/foo/i</code> sera tout de
    m&#234;me mandat&#233;e car c'est la directive <code class="directive">ProxyPass</code> de la
    section Location qui sera &#233;valu&#233;e en premier. Le fait que la directive
    <code class="directive">ProxyPass</code> supporte les deux contextes serveur
    principal et r&#233;pertoire ne signifie pas que sa port&#233;e et sa position dans le
    fichier de configuration va garantir une quelconque priorit&#233; et/ou
    chronologie de prise en compte.</p>

    <div class="warning"><h3>Ordre de classement des directives ProxyPass</h3>
      <p>Les directives <code class="directive"><a href="#proxypass">ProxyPass</a></code> et <code class="directive"><a href="#proxypassmatch">ProxyPassMatch</a></code> sont &#233;valu&#233;es dans
      l'ordre de leur apparition dans le fichier de configuration. La
      premi&#232;re r&#232;gle qui correspond s'applique. Vous devez donc en
      g&#233;n&#233;ral classer les r&#232;gles <code class="directive"><a href="#proxypass">ProxyPass</a></code> qui entrent en conflit de
      l'URL la plus longue &#224; la plus courte. Dans le cas contraire, les
      r&#232;gles situ&#233;es apr&#232;s une r&#232;gle dont l'URL correspond au d&#233;but de
      leur propre URL seront ignor&#233;es. Notez que tout ceci est en
      relation avec le partage de workers.</p>
      
      </div>
    <div class="warning"><h3>Chronologie de prise en compte des directives
    ProxyPass au sein des sections Locations</h3>
      <p>On ne peut placer
      qu'une seule directive <code class="directive"><a href="#proxypass">ProxyPass</a></code> dans une section
      <code class="directive"><a href="../mod/core.html#location">Location</a></code>, et c'est la section
      la plus sp&#233;cifique qui l'emportera.</p>
     </div>
     <div class="warning"><h3>Exclusions et variable d'environnement no-proxy</h3>
      <p>Les exclusions doivent se situer <em>avant</em>
      les directives <code class="directive">ProxyPass</code> g&#233;n&#233;rales. A partir de la
      version 2.4.26 du serveur HTTP Apache, la variable
      d'environnement "no-proxy" est une alternative aux exclusions et constitue
      le seul moyen de configurer une exclusion pour une directive
      <code class="directive">ProxyPass</code> dans le contexte d'une section <code class="directive"><a href="../mod/core.html#location">Location</a></code>. Cette variable doit &#234;tre d&#233;finie via
      la directive <code class="directive"><a href="../mod/mod_setenvif.html#setenvif">SetEnvIf</a></code> car la
      directive <code class="directive"><a href="../mod/mod_env.html#setenv">SetEnv</a></code> n'est pas &#233;valu&#233;e
      assez t&#244;t.</p>

    </div> 

    <p><strong>ProxyPass <code>cl&#233;=valeur</code> Param&#232;tres</strong></p>

    <p>Depuis la version 2.1 du serveur HTTP Apache, mod_proxy supporte
    les groupements de connexions vers un serveur d'arri&#232;re-plan. Les
    connexions cr&#233;&#233;es &#224; la demande peuvent &#234;tre enregistr&#233;es dans un
    groupement pour une utilisation ult&#233;rieure. La taille du groupe
    ainsi que d'autres caract&#233;ristiques peuvent &#234;tre d&#233;finies via la
    directive <code class="directive">ProxyPass</code> au moyen de param&#232;tres
    <code>cl&#233;=valeur</code> dont la description fait l'objet du tableau
    ci-dessous.</p>

    <div class="warning"><h3>Nombre maximum de connexions vers
    l'arri&#232;re-plan</h3> 
    <p>Par d&#233;faut, mod_proxy permet et met en r&#233;serve le
    nombre maximum de connexions pouvant &#234;tre utilis&#233;es simultan&#233;ment par le
    processus enfant concern&#233; du serveur web. Le param&#232;tre <code>max</code>
    permet de r&#233;duire cette valeur par d&#233;faut. Le jeu de connexions est maintenu
    au niveau de chaque processus enfant du serveur web, <code>max</code> et les
    autres r&#233;glages n'&#233;tant pas coordonn&#233;s entre ces diff&#233;rents processus, sauf
    bien entendu lorsqu'un seul processus enfant n'est autoris&#233; par la
    configuration ou le MPM utilis&#233;.</p> </div>
    
    <p>Le param&#232;tre <code>ttl</code>, quant &#224; lui, permet de d&#233;finir une dur&#233;e
    de vie optionnelle ; les connexions qui n'ont pas &#233;t&#233; utilis&#233;es pendant au
    moins <code>ttl</code> secondes seront ferm&#233;es. <code>ttl</code> permet
    aussi d'emp&#234;cher l'utilisation d'une connexion susceptible d'&#234;tre ferm&#233;e
    suite &#224; une fin de vie de connexion persistante sur le serveur
    d'arri&#232;re-plan.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyPass "/example" "http://backend.example.com" max=20 ttl=120 retry=300</pre>
</div>

    <table class="bordered"><tr><th>Param&#232;tres du worker (directive BalancerMember)</th></tr></table>
    <table>
    <tr><th>Param&#232;tre</th>
        <th>D&#233;faut</th>
        <th>Description</th></tr>
    <tr><td>min</td>
        <td>0</td>
        <td>Nombre minimum d'entr&#233;es dans le pool de connexions,
	distinct du nombre de connexions effectif. La valeur par d&#233;faut
	ne doit &#234;tre modifi&#233;e que dans des circonstances particuli&#232;res
	o&#249; la m&#233;moire associ&#233;e aux connexions avec le serveur
	d'arri&#232;re-plan doit &#234;tre pr&#233;allou&#233;e ou r&#233;serv&#233;e dans le tas.</td></tr>
    <tr><td>max</td>
        <td>1...n</td>
        <td>Nombre maximum de connexions autoris&#233;es vers le serveur
	d'arri&#232;re-plan. La valeur par d&#233;faut correspond au nombre de
	threads par processus pour le MPM (Module Multi Processus)
	actif. La valeur sera toujours 1 pour le MPM Prefork, alors
	qu'elle d&#233;pendra de la d&#233;finition de la directive
	<code class="directive">ThreadsPerChild</code> pour les autres MPMs.</td></tr>
    <tr><td>smax</td>
        <td>max</td>
        <td>Les entr&#233;es du pool de connexions conserv&#233;es au del&#224; de
	cette limite sont lib&#233;r&#233;es au cours de certaines op&#233;rations si
	elles n'ont pas &#233;t&#233; utilis&#233;es au cours de leur dur&#233;e de vie,
	d&#233;finie par le param&#232;tre <code>ttl</code>. Si l'entr&#233;e du pool
	de connexions est associ&#233;e &#224; une connexion, cette derni&#232;re sera
	ferm&#233;e. La valeur par d&#233;faut ne doit &#234;tre modifi&#233;e que dans des
	circonstances particuli&#232;res o&#249; les entr&#233;es du pool de connexions
	et toutes connexions associ&#233;es qui ont d&#233;pass&#233; leur dur&#233;e de vie
	doivent &#234;tre lib&#233;r&#233;es ou ferm&#233;es de mani&#232;re plus autoritaire.</td></tr>
    <tr><td>acquire</td>
        <td>-</td>
        <td>Cette cl&#233; permet de d&#233;finir le d&#233;lai maximum d'attente pour
	une connexion libre dans le jeu de connexions, en millisecondes.
	S'il n'y a pas de connexion libre dans le jeu, Apache httpd renverra
	l'&#233;tat <code>SERVER_BUSY</code> au client.
    </td></tr>
    <tr><td>connectiontimeout</td>
        <td>timeout</td>
        <td>D&#233;lai d'attente d'une connexion en secondes.
        La dur&#233;e en secondes pendant laquelle Apache httpd va attendre pour
	l'&#233;tablissement d'une connexion vers le serveur d'arri&#232;re-plan.
	Le d&#233;lai peut &#234;tre sp&#233;cifi&#233; en millisecondes en ajoutant le
	suffixe ms. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>disablereuse</td>
        <td>Off</td>
        <td>Vous pouvez utiliser cette cl&#233; pour forcer mod_proxy &#224;
	fermer imm&#233;diatement une connexion vers le serveur
	d'arri&#232;re-plan apr&#232;s utilisation, et ainsi d&#233;sactiver le jeu de
	connexions permanentes vers ce serveur. Ceci peut s'av&#233;rer utile
	dans des situations o&#249; un pare-feu situ&#233; entre Apache httpd et le
	serveur d'arri&#232;re-plan (quelque soit le protocole) interrompt
	des connexions de mani&#232;re silencieuse, ou lorsque le serveur
	d'arri&#232;re-plan lui-m&#234;me est accessible par rotation de DNS
	(round-robin DNS). Lorsque la r&#233;utilisation des connexions est activ&#233;e,
	chaque domaine d'arri&#232;re-plan n'est r&#233;solu (via une requ&#234;te DNS) qu'une
	seule fois par chaque processus enfant et mis en cache pour toutes les
	connexions ult&#233;rieures jusqu'au recyclage du processus concern&#233;.	
	Pour d&#233;sactiver la r&#233;utilisation du jeu de
	connexions, d&#233;finissez cette cl&#233; &#224; <code>On</code>.
    </td></tr>
    <tr><td>enablereuse</td>
        <td>On</td>
        <td>Fournie &#224; l'intention des gestionnaires de projet
	qui n&#233;cessitent un accord pour la r&#233;utilisation des connexions
	(tels que <code class="module"><a href="../mod/mod_proxy_fcgi.html">mod_proxy_fcgi</a></code>),
	cette option est l'inverse de l'option 'disablereuse' ci-dessus.
    </td></tr>
    <tr><td>flushpackets</td>
        <td>off</td>
        <td>Permet de d&#233;finir si le module mandataire doit vider
	automatiquement le tampon de sortie apr&#232;s chaque tron&#231;on de
	donn&#233;es. 'off' signifie que le tampon sera vid&#233; si n&#233;cessaire,
	'on' que le tampon sera vid&#233; apr&#232;s chaque envoi d'un
	tron&#231;on de donn&#233;es, et 'auto' que le tampon sera vid&#233; apr&#232;s un
	d&#233;lai de 'flushwait' millisecondes si aucune entr&#233;e n'est re&#231;ue.
	Actuellement, cette cl&#233; n'est support&#233;e que par mod_proxy_ajp et
	mod_proxy_fcgi.
    </td></tr>
    <tr><td>flushwait</td>
        <td>10</td>
        <td>Le d&#233;lai d'attente pour une entr&#233;e additionnelle, en
	millisecondes, avant le vidage du tampon en sortie dans le cas
	o&#249; 'flushpackets' est &#224; 'auto'. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>iobuffersize</td>
        <td>8192</td>
        <td>Permet de d&#233;finir la taille du tampon d'entr&#233;es/sorties du
	bloc-notes interne. Cette cl&#233; vous permet d'outrepasser la
	directive <code class="directive">ProxyIOBufferSize</code> pour un
	serveur cible sp&#233;cifique. La valeur doit &#234;tre au minimum 512 ou d&#233;finie
	&#224; 0 pour la valeur par d&#233;faut du syst&#232;me de 8192.
    </td></tr>
    <tr><td>responsefieldsize</td>
        <td>8192</td>
	<td>Contr&#244;le la taille du tampon pour le champ de la r&#233;ponse mandat&#233;e.
	Cette taille doit &#234;tre au moins &#233;gale &#224; la taille attendue du plus grand
	en-t&#234;te d'une r&#233;ponse mandat&#233;e. Une valeur de 0 implique l'utilisation
	de la valeur par d&#233;faut du syst&#232;me, &#224; savoir 8192 octets.<br />
	Disponible &#224; partir de la version 2.4.34 du serveur HTTP Apache.
    </td></tr>
    <tr><td>keepalive</td>
        <td>Off</td>
        <td><p>Cette cl&#233; doit &#234;tre utilis&#233;e lorsque vous avez un pare-feu
	entre Apache httpd et le serveur d'arri&#232;re-plan, et si ce dernier tend
	&#224; interrompre les connexions inactives. Cette cl&#233; va faire en
	sorte que le syst&#232;me d'exploitation envoie des messages
	<code>KEEP_ALIVE</code> sur chacune des connexions inactives et
	ainsi &#233;viter la	fermeture de la	connexion par le pare-feu.
	Pour conserver les connexions persistantes, definissez cette
	propri&#233;t&#233; &#224; <code>On</code>.</p>
    <p>La fr&#233;quence de v&#233;rification des connexions TCP persistantes
    initiale et subs&#233;quentes d&#233;pend de la configuration globale de l'OS,
    et peut atteindre 2 heures. Pour &#234;tre utile, la fr&#233;quence configur&#233;e
    dans l'OS doit &#234;tre inf&#233;rieure au seuil utilis&#233; par le pare-feu. Utilise la
    syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.</p>

    </td></tr>
    <tr><td>lbset</td>
        <td>0</td>
        <td>D&#233;finit le groupe de r&#233;partition de charge dont le serveur cible
	est membre. Le r&#233;partiteur de charge va essayer tous les membres
	d'un groupe de r&#233;partition de charge de num&#233;ro inf&#233;rieur avant
	d'essayer ceux dont le groupe poss&#232;de un num&#233;ro sup&#233;rieur.
    </td></tr>
    <tr><td>ping</td>
        <td>0</td>
        <td>Avec la cl&#233; Ping, le serveur web va "tester" la connexion
	vers le serveur d'arri&#232;re-plan avant de transmettre la requ&#234;te.
	Pour les valeurs n&#233;gatives, le test est une simple v&#233;rification
	de socket, alors que pour les valeurs positives, il s'agit d'une
	v&#233;rification plus approfondie d&#233;pendant du protocole.
	Avec AJP, <code class="module"><a href="../mod/mod_proxy_ajp.html">mod_proxy_ajp</a></code> envoie une requ&#234;te
	<code>CPING</code> sur la connexion ajp13 (impl&#233;ment&#233; sur Tomcat
	3.3.2+, 4.1.28+ et 5.0.13+). Avec HTTP,
	<code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code> envoie <code>100-Continue</code>
	au serveur d'arri&#232;re-plan (seulement avecHTTP/1.1 - pour les
	serveurs d'arri&#232;re-plan non HTTP/1.1, cette cl&#233; ne produit
	aucun effet). Dans les deux cas, ce param&#232;tre correspond au
	d&#233;lai en secondes pour l'attente de la r&#233;ponse. Cette
	fonctionnalit&#233; a &#233;t&#233; ajout&#233;e pour &#233;viter les probl&#232;mes avec les
	serveurs d'arri&#232;re-plan bloqu&#233;s ou surcharg&#233;s.

	Le trafic
	r&#233;seau peut s'en trouver augment&#233; en fonctionnement normal, ce
	qui peut poser probl&#232;me, mais peut s'en trouver diminu&#233; dans les
	cas o&#249; les noeuds de cluster sont arr&#234;t&#233;s ou
	surcharg&#233;s. Le d&#233;lai peut
	aussi &#234;tre d&#233;fini en millisecondes en ajoutant le suffixe
	ms. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>receivebuffersize</td>
        <td>0</td>
        <td>D&#233;finit la taille du tampon r&#233;seau explicite (TCP/IP) pour
	les connexions mandat&#233;es. Cette cl&#233; vous permet d'outrepasser la
	directive <code class="directive">ProxyReceiveBufferSize</code> pour un
	serveur cible sp&#233;cifique. Sa valeur doit &#234;tre au minimum 512 ou d&#233;finie
	&#224; 0 pour la valeur par d&#233;faut du syst&#232;me.
    </td></tr>
    <tr><td>redirect</td>
        <td>-</td>
        <td>Route pour la redirection du serveur cible. Cette valeur est en
	g&#233;n&#233;ral d&#233;finie dynamiquement pour permettre une suppression
	s&#233;curis&#233;e du noeud du cluster. Si cette cl&#233; est d&#233;finie, toutes
	les requ&#234;tes sans identifiant de session seront redirig&#233;es vers
	le membre de groupe de r&#233;partition de charge dont la route
	correspond &#224; la valeur de la cl&#233;.
    </td></tr>
    <tr><td>retry</td>
        <td>60</td>
        <td>D&#233;lai entre deux essais du serveur cible du jeu de connexions en
	secondes. Si le serveur cible du jeu de connexions vers le serveur
	d'arri&#232;re-plan est dans un &#233;tat d'erreur, Apache httpd ne redirigera
	pas de requ&#234;te vers ce serveur avant l'expiration du d&#233;lai
	sp&#233;cifi&#233;. Ceci permet d'arr&#234;ter le serveur d'arri&#232;re-plan pour
	maintenance, et de le remettre en ligne plus tard. Une valeur de
	0 implique de toujours essayer les serveurs cibles dans un &#233;tat d'erreur
	sans d&#233;lai. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>route</td>
        <td>-</td>
        <td>La route du serveur cible lorsqu'il est utilis&#233; au sein d'un
	r&#233;partiteur de charge. La route est une valeur ajout&#233;e &#224;
	l'identifiant de session.
    </td></tr>
    <tr><td><a name="status_table">status</a></td>
        <td>-</td>
        <td>Valeur constitu&#233;e d'une simple lettre et d&#233;finissant l'&#233;tat
	initial de ce serveur cible.
	 <table class="bordered">
         <tr><td><code>D</code></td><td>le serveur cible est
	 d&#233;sactiv&#233; et n'accepte aucune requ&#234;te ; sa
	 r&#233;activation sera automatiquement relanc&#233;e.</td></tr>
         <tr><td><code>S</code></td><td>le serveur cible est arr&#234;t&#233;
	 ; il n'accepte plus de requ&#234;te et sa r&#233;activation ne sera pas
	 automatiquement relanc&#233;e.</td></tr>
         <tr><td><code>I</code></td><td>le serveur cible est en mode "erreurs ignor&#233;es",
	 et sera toujours consid&#233;r&#233; comme disponible.</td></tr>
	 <tr><td><code>R</code></td><td>Le serveur cible sert de rempla&#231;ant &#224;
	 chaud. Lorsqu'un serveur cible avec un lbset donn&#233; est inutilisable
	 (maintenance, arr&#234;t, en erreur, etc...), un serveur de remplacement &#224;
	 chaud libre de m&#234;me lbset sera utilis&#233; &#224; sa place. Les rempla&#231;ants &#224;
	 chaud permettent de s'assurer qu'un nombre d&#233;termin&#233; de serveurs cibles
	 sera toujours disponible pour un r&#233;partiteur de charge.</td></tr>
         <tr><td><code>H</code></td><td>le serveur cible est en mode d'attente et ne sera
	 utilis&#233; que si aucun autre serveur ou rempla&#231;ant &#224; chaud n'est
	 disponible dans le jeu de serveurs cibles.</td></tr>
         <tr><td><code>E</code></td><td>le serveur cible est en erreur.</td></tr>
         <tr><td><code>N</code></td><td>le serveur cible est en mode vidage, n'acceptera que
	 les sessions persistantes qui lui appartiennent, et refusera
	 toutes les autres requ&#234;tes.</td></tr>
        </table>
	Une valeur d'&#233;tat peut &#234;tre d&#233;finie (ce qui
	correspond au comportement par d&#233;faut) en pr&#233;fixant la valeur
	par '+', ou annul&#233;e en pr&#233;fixant la valeur par '-'. Ainsi, la
	valeur 'S-E' d&#233;finit l'&#233;tat de ce serveur cible &#224; "arr&#234;t&#233;" et supprime
	le drapeau "en-erreur".
    </td></tr>
    <tr><td>timeout</td>
        <td><code class="directive"><a href="#proxytimeout">ProxyTimeout</a></code></td>
        <td>D&#233;lai d'attente de la connexion en secondes. Le nombre de
	secondes pendant lesquelles Apache httpd attend l'envoi de
	donn&#233;es vers le serveur d'arri&#232;re-plan. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>ttl</td>
        <td>-</td>
        <td>Dur&#233;e de vie des connexions inactives et des entr&#233;es du pool
	de connexions associ&#233;es en secondes. Une fois cette
	limite atteinte, une connexion ne sera pas r&#233;utilis&#233;e ; elle
	sera ferm&#233;e apr&#232;s un d&#233;lai variable. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>flusher</td>
        <td>flush</td>
        <td><p>Le fournisseur utilis&#233; par <code class="module"><a href="../mod/mod_proxy_fdpass.html">mod_proxy_fdpass</a></code>.
	Se r&#233;f&#233;rer &#224; la documentation de ce module pour plus de d&#233;tails.</p>
    </td></tr>
    <tr><td>secret</td>
        <td>-</td>
        <td><p>Le mot de passe utilis&#233; par <code class="module"><a href="../mod/mod_proxy_ajp.html">mod_proxy_ajp</a></code>. Voir
	la documentation de ce module pour plus de d&#233;tails.</p>
    </td></tr>
    <tr><td>upgrade</td>
        <td>WebSocket</td>
        <td><p>Le protocol accept&#233; par <code class="module"><a href="../mod/mod_proxy_wstunnel.html">mod_proxy_wstunnel</a></code> dans
	l'en-t&#234;te Upgrade. Voir	la documentation de ce module pour plus de
	d&#233;tails.</p>
    </td></tr>

    </table>

    <p>Si l'URL de la directive Proxy d&#233;bute par
    <code>balancer://</code> (par exemple:
    <code>balancer://cluster</code>, toute information relative au
    chemin est ignor&#233;e), alors un serveur cible virtuel ne communiquant pas
    r&#233;ellement avec le serveur d'arri&#232;re-plan sera cr&#233;&#233;. Celui-ci sera
    en fait responsable de la gestion de plusieurs serveurs cibles "r&#233;els". Dans
    ce cas, un jeu de param&#232;tres particuliers s'applique &#224; ce serveur cible
    virtuel. Voir <code class="module"><a href="../mod/mod_proxy_balancer.html">mod_proxy_balancer</a></code> pour plus
    d'informations &#224; propos du fonctionnement du r&#233;partiteur de
    charge.
    </p>
    <table class="bordered"><tr><th>Param&#232;tres du r&#233;partiteur</th></tr></table>
    <table>
    <tr><th>Param&#232;tre</th>
        <th>D&#233;faut</th>
        <th>Description</th></tr>
    <tr><td>lbmethod</td>
        <td>byrequests</td>
        <td>M&#233;thode de r&#233;partition de charge utilis&#233;e. Permet de
	s&#233;lectionner la m&#233;thode de planification de la r&#233;partition de
	charge &#224; utiliser. La valeur est soit <code>byrequests</code>,
	pour effectuer un d&#233;compte de requ&#234;tes pond&#233;r&#233;es, soit
	<code>bytraffic</code>, pour effectuer une r&#233;partition en
	fonction du d&#233;compte des octets transmis, soit
	<code>bybusyness</code>, pour effectuer une r&#233;partition en
	fonction des requ&#234;tes en attente. La valeur par d&#233;faut est
	<code>byrequests</code>.
    </td></tr>
    <tr><td>maxattempts</td>
        <td>1 de moins que le nombre de workers, ou 1 avec un seul
	worker</td>
        <td>Nombre maximum d'&#233;checs avant abandon.
    </td></tr>
    <tr><td>nofailover</td>
        <td>Off</td>
        <td>Si ce param&#232;tre est d&#233;fini &#224; <code>On</code>, la session va
	s'interrompre si le serveur cible est dans un &#233;tat d'erreur ou
	d&#233;sactiv&#233;. D&#233;finissez ce param&#232;tre &#224; <code>On</code> si le serveur
	d'arri&#232;re-plan ne supporte pas la r&#233;plication de session.
    </td></tr>
    <tr><td>stickysession</td>
        <td>-</td>
        <td>Nom de session persistant du r&#233;partiteur. La valeur est
	g&#233;n&#233;ralement du style <code>JSESSIONID</code> ou
	<code>PHPSESSIONID</code>, et d&#233;pend du serveur d'application
	d'arri&#232;re-plan qui supporte les sessions. Si le serveur
	d'application d'arri&#232;re-plan utilise des noms diff&#233;rents pour
	les cookies et les identifiants cod&#233;s d'URL (comme les
	conteneurs de servlet), s&#233;parez-les par le caract&#232;re '|'. La
	premi&#232;re partie contient le cookie et la seconde le chemin.<br />
	Disponible depuis la version 2.4.4 du serveur HTTP Apache.
    </td></tr>
    <tr><td>stickysessionsep</td>
        <td>"."</td>
        <td>Permet de d&#233;finir le caract&#232;re de s&#233;paration dans le cookie
	de session. En effet, certains serveurs d'application d'arri&#232;re-plan
	n'utilisent pas le '.' comme caract&#232;re de s&#233;paration. Par
	exemple, le serveur Oracle Weblogic utilise le caract&#232;re '!'.
	Cette option permet donc de d&#233;finir le caract&#232;re de s&#233;paration &#224;
	une valeur appropri&#233;e. Si elle est d&#233;finie &#224; 'Off', aucun
	caract&#232;re de s&#233;paration ne sera utilis&#233;.
    </td></tr>
    <tr><td>scolonpathdelim</td>
        <td>Off</td>
        <td>Si ce param&#232;tre est d&#233;fini &#224; <code>On</code>, le caract&#232;re
	';' sera utilis&#233; comme s&#233;parateur de chemin de session
	persistante additionnel. Ceci permet principalement de simuler
	le comportement de mod_jk lorsqu'on utilise des chemins du style
	<code>JSESSIONID=6736bcf34;foo=aabfa</code>.
    </td></tr>
    <tr><td>timeout</td>
        <td>0</td>
        <td>D&#233;lai du r&#233;partiteur en secondes. Si ce param&#232;tre est
	d&#233;fini, sa valeur correspond &#224; la dur&#233;e maximale d'attente pour
	un serveur cible libre. Le comportement par d&#233;faut est de ne pas
	attendre. Utilise la syntaxe <a href="directive-dict.html#Syntax">time-interval</a>.
    </td></tr>
    <tr><td>failonstatus</td>
        <td>-</td>
        <td>Une liste de codes d'&#233;tat HTTP s&#233;par&#233;s par des virgules. Si
	ce param&#232;tre est pr&#233;sent, le worker se mettra en erreur si le
	serveur d'arri&#232;re-plan renvoie un des codes d'&#233;tat sp&#233;cifi&#233;s
	dans la liste. La r&#233;cup&#233;ration du worker s'effectue comme dans
	le cas des autres erreurs de worker.
    </td></tr>

    <tr><td>failontimeout</td>
        <td>Off</td>
        <td>Si ce param&#232;tre est d&#233;fini &#224; "On", un d&#233;lai d'attente
	d&#233;pass&#233; en entr&#233;e/sortie apr&#232;s envoi d'une requ&#234;te au serveur
	d'arri&#232;re-plan va mettre le processus en &#233;tat d'erreur. La
	sortie de cet &#233;tat d'erreur se passe de la m&#234;me fa&#231;on que pour
	les autres erreurs.<br />
	Disponible depuis la version 2.4.5 du serveur HTTP Apache.
    </td></tr>

    <tr><td>nonce</td>
        <td>&lt;auto&gt;</td>
        <td>Le nombre &#224; usage unique de protection utilis&#233; dans la page
	de l'application <code>balancer-manager</code>. Par d&#233;faut, la
	protection de la page est assur&#233;e par un nombre &#224; usage unique
	automatique &#224; base d'UUID. Si une valeur est pr&#233;cis&#233;e, elle sera
	utilis&#233;e comme nombre &#224; usage unique. La valeur
	<code>None</code> d&#233;sactive la v&#233;rification du nombre &#224; usage
	unique.
    <div class="note"><h3>Note</h3>
      <p>En plus du nombre &#224; usage unique, la page de l'application
      <code>balancer-manager</code> peut &#234;tre prot&#233;g&#233;e par une ACL.</p>
    </div>
     </td></tr>
    <tr><td>growth</td>
        <td>0</td>
        <td>Nombre de membres suppl&#233;mentaires que l'on peut ajouter &#224; ce
	r&#233;partiteur en plus de ceux d&#233;finis au niveau de la
	configuration.
    </td></tr>
    <tr><td>forcerecovery</td>
        <td>On</td>
        <td>Force la relance imm&#233;diate de tous les membres sans tenir
	compte de leur param&#232;tre retry dans le cas o&#249; ils sont tous en
	&#233;tat d'erreur. Il peut cependant arriver qu'un membre d&#233;j&#224;
	surcharg&#233; entre dans une situation critique si la relance de
	tous les membres est forc&#233;e sans tenir compte du param&#232;tre retry
	de chaque membre. Dans ce cas, d&#233;finissez ce param&#232;tre &#224;
	<code>Off</code>.<br />
	Disponible depuis la version 2.4.2 du serveur HTTP Apache.
    </td></tr>

    </table>
    <p>Exemple de configuration d'un r&#233;partiteur de charge</p>
    <pre class="prettyprint lang-config">ProxyPass "/special-area" "http://special.example.com" smax=5 max=10
ProxyPass "/" "balancer://mycluster/" stickysession=JSESSIONID|jsessionid nofailover=On
&lt;Proxy balancer://mycluster&gt;
    BalancerMember ajp://1.2.3.4:8009
    BalancerMember ajp://1.2.3.5:8009 loadfactor=20
    # Le serveur suivant est moins puissant ; on lui envoie moins de requ&#234;tes,
    BalancerMember ajp://1.2.3.6:8009 loadfactor=5
&lt;/Proxy&gt;</pre>


    <p>La d&#233;finition de rempla&#231;ants &#224; chaud permet de s'assurer qu'un nombre
    d&#233;termin&#233; de serveurs sera toujours disponible dans le jeu de serveurs
    cibles :</p>
    <pre class="prettyprint lang-config">ProxyPass "/" "balancer://sparecluster/"
&lt;Proxy balancer://sparecluster&gt;
    BalancerMember ajp://1.2.3.4:8009
    BalancerMember ajp://1.2.3.5:8009
    # Les serveurs ci-dessous sont des rempla&#231;ants &#224; chaud. Pour chaque serveur
    # ci-dessus qui viendrait &#224; &#234;tre inutilisable (maintenance, arr&#234;t, non
    # contactable, en erreur, etc...), un de ces rempla&#231;ants &#224; chaud prendra sa
    # place. Deux serveurs seront toujours disponibles pour traiter une requ&#234;te
    # (&#224; moins qu'un ou plusieurs rempla&#231;ant &#224; chaud soit lui aussi
    # indisponible).
    BalancerMember ajp://1.2.3.6:8009 status=+R
    BalancerMember ajp://1.2.3.7:8009 status=+R
&lt;/Proxy&gt;</pre>


    <p>Configuration d'un serveur cible de r&#233;serve qui ne sera utilis&#233; que si
    aucun autre serveur cible ou rempla&#231;ant &#224; chaud n'est disponible dans le jeu
    de serveurs cibles :</p>
    <pre class="prettyprint lang-config">ProxyPass "/" "balancer://hotcluster/ "
&lt;Proxy balancer://hotcluster&gt;
    BalancerMember ajp://1.2.3.4:8009 loadfactor=1
    BalancerMember ajp://1.2.3.5:8009 loadfactor=2.25
    # Le serveur suivant est en mode hot standby
    BalancerMember ajp://1.2.3.6:8009 status=+H
    ProxySet lbmethod=bytraffic
&lt;/Proxy&gt;</pre>


    <p><strong>Mot-cl&#233;s suppl&#233;mentaires de ProxyPass</strong></p>

    <p>Normalement, mod_proxy va mettre sous leur forme canonique les
    URLs trait&#233;es par ProxyPass. Mais ceci peut &#234;tre incompatible avec
    certains serveurs d'arri&#232;re-plan, et en particulier avec ceux qui
    utilisent <var>PATH_INFO</var>. Le mot-cl&#233; optionnel
    <var>nocanon</var> modifie ce comportement et permet de transmettre
    le chemin d'URL sous sa forme brute au serveur d'arri&#232;re-plan. Notez
    que ce mot-cl&#233; peut affecter la s&#233;curit&#233; de votre serveur d'arri&#232;re-plan,
    car la protection limit&#233;e contre les attaques &#224; base d'URL que
    fournit le mandataire est alors supprim&#233;e.</p>

    <p>Par d&#233;faut, mod_proxy inclut la cha&#238;ne de param&#232;tres lors de la
    g&#233;n&#233;ration de la variable d'environnement
    <var>SCRIPT_FILENAME</var>. Le mot-cl&#233; optionnel <var>noquery</var>
    (disponible &#224; partir de la version 2.4.1) permet d'exclure cette
    cha&#238;ne.</p>

    

    

    <p>Le mot-cl&#233; optionnel <var>interpolate</var>, en combinaison avec la directive
    <code class="directive"><a href="#proxypassinterpolateenv">ProxyPassInterpolateEnv</a></code>, permet &#224; ProxyPass
    d'interpoler les variables d'environnement &#224; l'aide de la syntaxe
    <var>${VARNAME}</var>. Notez que de nombreuses variables
    d'environnement standard d&#233;riv&#233;es de CGI n'existeront pas lorsque
    l'interpolation se produit ; vous devrez alors encore avoir avoir
    recours &#224; <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code> pour des r&#232;gles
    complexes. Notez aussi que l'interpolation n'est support&#233;e dans
    la partie protocole/hostname/port d'une URL que pour les variables qui sont
    accessibles au moment o&#249; la directive est interpr&#233;t&#233;e (similairement &#224; la
    directive <code class="directive"><a href="../mod/core.html#define">Define</a></code>). La d&#233;termination dynamique de
    ces champs peut &#234;tre effectu&#233;e &#224; l'aide de
    <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>. L'exemple suivant d&#233;crit comment utiliser
    <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code> pour d&#233;finir dynamiquement le protocole &#224; http
    ou https :</p>

    <pre class="prettyprint lang-config">RewriteEngine On

RewriteCond %{HTTPS} =off
RewriteRule . - [E=protocol:http]
RewriteCond %{HTTPS} =on
RewriteRule . - [E=protocol:https]

RewriteRule ^/mirror/foo/(.*) %{ENV:protocol}://backend.example.com/$1 [P]
ProxyPassReverse  "/mirror/foo/" "http://backend.example.com/"
ProxyPassReverse  "/mirror/foo/" "https://backend.example.com/"</pre>



</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypassinherit" id="proxypassinherit">Directive</a> <a name="ProxyPassInherit" id="ProxyPassInherit">ProxyPassInherit</a><a title="Lien permanent" href="#proxypassinherit" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>H&#233;ritage des directives ProxyPass d&#233;finies au niveau du
serveur principal</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPassInherit On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyPassInherit On</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>Disponible &#224; partir de la version 2.4.5 du serveur
HTTP Apache.</td></tr>
</table>
        <p>Cette directive permet &#224; un serveur virtuel d'h&#233;riter des
	directives <code class="directive"><a href="#proxypass">ProxyPass</a></code> d&#233;finies
	au niveau du serveur principal. Si vous utilisez la fonctionnalit&#233; de
	modifications dynamiques du Balancer Manager, cette directive peut
	causer des probl&#232;mes et des comportements inattendus et doit donc
	&#234;tre d&#233;sactiv&#233;e.</p>
        <p>Les valeurs d&#233;finies au niveau du serveur principal
	constituent les valeurs par d&#233;faut pour tous les serveurs virtuels.</p>
        <p>La d&#233;sactivation de ProxyPassInherit d&#233;sactive aussi la
	directive <code class="directive"><a href="#balancerinherit">BalancerInherit</a></code>.</p>
    
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypassinterpolateenv" id="proxypassinterpolateenv">Directive</a> <a name="ProxyPassInterpolateEnv" id="ProxyPassInterpolateEnv">ProxyPassInterpolateEnv</a><a title="Lien permanent" href="#proxypassinterpolateenv" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Active l'interpolation des variables d'environnement dans
les configurations de mandataires inverses</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPassInterpolateEnv On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyPassInterpolateEnv Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive, ainsi que l'argument <var>interpolate</var> des
    directives <code class="directive">ProxyPass</code>,
    <code class="directive">ProxyPassReverse</code>,
    <code class="directive">ProxyPassReverseCookieDomain</code> et
    <code class="directive">ProxyPassReverseCookiePath</code>, permet de
    configurer dynamiquement un mandataire inverse &#224; l'aide de
    variables d'environnement, ces derni&#232;res pouvant &#234;tre d&#233;finies par un
    autre module comme <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>. Elle affecte les
    directives <code class="directive">ProxyPass</code>,
    <code class="directive">ProxyPassReverse</code>,
    <code class="directive">ProxyPassReverseCookieDomain</code>, et
    <code class="directive">ProxyPassReverseCookiePath</code>, en leur indiquant
    de remplacer la cha&#238;ne <code>${nom_var}</code> dans les directives
    de configuration par la valeur de la variable d'environnement
    <code>nom_var</code> si l'option <var>interpolate</var> est
    sp&#233;cifi&#233;e.</p>
    <p>La partie protocole/hostname/port de <code class="directive">ProxyPass</code>
    peut contenir des variables, mais seulement celles qui sont accessibles au
    moment o&#249; la directive est interpr&#233;t&#233;e (similairement &#224; la directive
    <code class="directive"><a href="../mod/core.html#define">Define</a></code>). Pour tous les autres cas,
    utilisez plut&#244;t <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>.</p> 
    <div class="warning"><h3>Avertissement concernant les performances</h3>
    <p>Laissez cette directive &#224; off, &#224; moins que vous n'en ayez r&#233;ellemnt
    besoin ! Par exemple, ajouter des variables &#224;
    <code class="directive">ProxyPass</code> peut entra&#238;ner l'utilisation des serveurs
    d'arri&#232;re-plan de mod_proxy configur&#233;s par d&#233;faut, et ceux-ci ne permettent
    pas un r&#233;glage fin comme la r&#233;utilisation des connexions, entre
    autres...).</p> </div>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypassmatch" id="proxypassmatch">Directive</a> <a name="ProxyPassMatch" id="ProxyPassMatch">ProxyPassMatch</a><a title="Lien permanent" href="#proxypassmatch" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Fait correspondre des serveurs distants dans l'espace d'URL
du serveur local en utilisant des expressions rationnelles</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPassMatch [<var>regex</var>] !|<var>url</var>
[<var>cl&#233;=valeur</var>
	<var>[cl&#233;=valeur</var> ...]]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive est identique &#224; la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>, mais fait usage des
    expressions rationnelles, au lieu d'une simple comparaison de
    pr&#233;fixes. L'expression rationnelle sp&#233;cifi&#233;e est compar&#233;e &#224;
    l'<var>url</var>, et si elle correspond, le serveur va substituer
    toute correspondance entre parenth&#232;ses dans la cha&#238;ne donn&#233;e et
    l'utiliser comme nouvelle <var>url</var>.</p>

    <div class="note"><strong>Note : </strong>Cette directive ne peut pas &#234;tre
    utilis&#233;e dans un contexte de niveau r&#233;pertoire.</div>

    <p>Supposons que le serveur local a pour adresse
    <code>http://example.com/</code> ; alors</p>

    <pre class="prettyprint lang-config">ProxyPassMatch "^(/.*\.gif)$" "http://backend.example.com/$1"</pre>


    <p>va provoquer la conversion interne de la requ&#234;te locale
    <code>http://example.com/foo/bar.gif</code> en une requ&#234;te mandat&#233;e
    pour <code>http://backend.example.com/foo/bar.gif</code>.</p>

    <div class="note"><h3>Note</h3>
      <p>L'argument URL doit pouvoir &#234;tre interpr&#233;t&#233; en tant qu'URL
      <em>avant</em> les substitutions d'expressions rationnelles (et
      doit aussi l'&#234;tre apr&#232;s). Ceci limite les correspondances que vous
      pouvez utiliser. Par exemple, si l'on avait utilis&#233;</p>
      <pre class="prettyprint lang-config">        ProxyPassMatch "^(/.*\.gif)$"
	"http://backend.example.com:8000$1"</pre>

      <p>dans l'exemple pr&#233;c&#233;dent, nous aurions provoqu&#233; une erreur de
      syntaxe au d&#233;marrage du serveur. C'est une bogue (PR 46665 dans
      ASF bugzilla), et il est possible de la contourner en reformulant
      la correspondance :</p>
      <pre class="prettyprint lang-config">ProxyPassMatch "^/(.*\.gif)$" "http://backend.example.com:8000/$1"</pre>

    </div>

    <p>Le drapeau <code>!</code> vous permet de ne pas mandater un
    sous-r&#233;pertoire donn&#233;.</p>

    <p>Dans une section <code class="directive"><a href="../mod/core.html#locationmatch">&lt;LocationMatch&gt;</a></code>, le premier argument est
    omis et l'expression rationnelle est obtenue &#224; partir de la directive
    <code class="directive"><a href="../mod/core.html#locationmatch">&lt;LocationMatch&gt;</a></code>.</p>

    <p>Si vous avez besoin d'une configuration du mandataire inverse
    plus flexible, voyez la directive <code class="directive"><a href="../mod/mod_rewrite.html#rewriterule">RewriteRule</a></code> avec le drapeau
    <code>[P]</code>.</p>

    <div class="note">
 	<h3>Substitution par d&#233;faut</h3>
 	<p>Lorsque le param&#232;tre URL n'utilise pas de r&#233;f&#233;rences arri&#232;res
	dans l'expression rationnelle, l'URL originale sera ajout&#233;e au
	param&#232;tre URL.
 	</p>
 	</div>

    <div class="warning">
      <h3>Avertissement &#224; propos de la s&#233;curit&#233;</h3>
      <p>Lors de la construction de l'URL cible de la r&#232;gle, il convient
      de prendre en compte l'impact en mati&#232;re de s&#233;curit&#233; qu'aura le
      fait de permettre au client d'influencer le jeu d'URLs pour
      lesquelles votre serveur agira en tant que mandataire.
      Assurez-vous que la partie protocole://nom-serveur de l'URL soit
      fixe, ou ne permette pas au client de l'influencer induement.</p>
    </div>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypassreverse" id="proxypassreverse">Directive</a> <a name="ProxyPassReverse" id="ProxyPassReverse">ProxyPassReverse</a><a title="Lien permanent" href="#proxypassreverse" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Ajuste l'URL dans les en-t&#234;tes de la r&#233;ponse HTTP envoy&#233;e
par un serveur mandat&#233; en inverse</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPassReverse [<var>chemin</var>] <var>url</var>
[<var>interpolate</var>]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet de faire en sorte qu'Apache httpd ajuste l'URL
    dans les en-t&#234;tes <code>Location</code>,
    <code>Content-Location</code> et <code>URI</code> des r&#233;ponses de
    redirection HTTP. Ceci est essentiel lorsqu'Apache httpd est utilis&#233; en
    tant que mandataire inverse (ou passerelle), afin d'&#233;viter de
    court-circuiter le mandataire inverse suite aux redirections HTTP
    sur le serveur d'arri&#232;re-plan qui restent derri&#232;re le mandataire
    inverse.</p>

    <p>Seuls les en-t&#234;tes de r&#233;ponse HTTP sp&#233;cialement mentionn&#233;s
    ci-dessus seront r&#233;&#233;crits. Apache httpd ne r&#233;&#233;crira ni les autres en-t&#234;tes
    de r&#233;ponse, ni par d&#233;faut les r&#233;f&#233;rences d'URLs dans les pages HTML. Cela
    signifie que dans le cas o&#249; un contenu mandat&#233; contient des
    r&#233;f&#233;rences &#224; des URLs absolues, elles court-circuiteront le
    mandataire. Pour r&#233;&#233;crire un contenu HTML afin qu'il corresponde au
    mandataire, vous devez charger et activer le module
    <code class="module"><a href="../mod/mod_proxy_html.html">mod_proxy_html</a></code>.
    </p>

    <p><var>chemin</var> est le nom d'un chemin virtuel local.
    <var>url</var> est une URL partielle pour le serveur distant. Ces
    param&#232;tres s'utilisent de la m&#234;me fa&#231;on qu'avec la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>

    <p>Supposons par exemple que le serveur local a pour adresse
    <code>http://example.com/</code> ; alors</p>

    <pre class="prettyprint lang-config">ProxyPass         "/mirror/foo/" "http://backend.example.com/"
ProxyPassReverse  "/mirror/foo/" "http://backend.example.com/"
ProxyPassReverseCookieDomain  backend.example.com  public.example.com
ProxyPassReverseCookiePath  "/"  "/mirror/foo/"</pre>


    <p>ne va pas seulement provoquer la conversion interne d'une requ&#234;te
    locale pour <code>http://example.com/mirror/foo/bar</code> en une
    requ&#234;te mandat&#233;e pour <code>http://backend.example.com/bar</code>
    (la fonctionnalit&#233; fournie par <code>ProxyPass</code>). Il va
    aussi s'occuper des redirections que le serveur
    <code>backend.example.com</code> envoie lorsque
    <code>http://backend.example.com/bar</code> est redirig&#233; par
    celui-ci vers <code>http://backend.example.com/quux</code>, Apache
    httpd corrige ceci en <code>http://example.com/mirror/foo/quux</code>
    avant de faire suivre la redirection HTTP au client. Notez que le
    nom d'h&#244;te utilis&#233; pour construire l'URL est choisi en respectant la
    d&#233;finition de la directive <code class="directive"><a href="../mod/core.html#usecanonicalname">UseCanonicalName</a></code>.</p>

    <p>Notez que la directive <code class="directive">ProxyPassReverse</code>
    peut aussi &#234;tre utilis&#233;e en conjonction avec la
    fonctionnalit&#233; de mandataire
    (<code>RewriteRule ...  [P]</code>) du module
    <code class="module"><a href="../mod/mod_rewrite.html">mod_rewrite</a></code>, car elle ne d&#233;pend pas d'une directive
    <code class="directive"><a href="#proxypass">ProxyPass</a></code>
    correspondante.</p>

    <p>Le mot-cl&#233; optionnel <var>interpolate</var>,
    utilis&#233; en combinaison avec la directive
    <code class="directive">ProxyPassInterpolateEnv</code>, permet
    l'interpolation des variables d'environnement sp&#233;cifi&#233;es en
    utilisant le format <var>${VARNAME}</var>. Notez que l'interpolation
    n'est pas support&#233;e dans la partie protocole d'une URL.
    </p>

    <p>Lorsque cette directive est utilis&#233;e dans une section <code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code>, le premier
    argument est omis et le r&#233;pertoire local est obtenu &#224; partir de
    l'argument de la directive <code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code>. Il en est de m&#234;me &#224; l'int&#233;rieur
    d'une section <code class="directive"><a href="../mod/core.html#locationmatch">&lt;LocationMatch&gt;</a></code>, mais le r&#233;sultat ne sera
    probablement pas celui attendu car ProxyPassReverse va interpr&#233;ter
    l'expression rationnelle litt&#233;ralement comme un chemin ; si besoin
    est dans ce cas, d&#233;finissez la directive ProxyPassReverse en dehors
    de la section, ou dans une section <code class="directive"><a href="../mod/core.html#location">&lt;Location&gt;</a></code> s&#233;par&#233;e.</p>

    <p>Cette directive ne peut pas &#234;tre plac&#233;e dans une section
    <code class="directive"><a href="../mod/core.html#directory">&lt;Directory&gt;</a></code> ou
    <code class="directive"><a href="../mod/core.html#files">&lt;Files&gt;</a></code>.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypassreversecookiedomain" id="proxypassreversecookiedomain">Directive</a> <a name="ProxyPassReverseCookieDomain" id="ProxyPassReverseCookieDomain">ProxyPassReverseCookieDomain</a><a title="Lien permanent" href="#proxypassreversecookiedomain" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Ajuste la cha&#238;ne correspondant au domaine dans les en-t&#234;tes
Set-Cookie en provenance d'un serveur mandat&#233;</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPassReverseCookieDomain <var>domaine-interne</var>
<var>domaine-public</var> [<var>interpolate</var>]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
<p>L'utilisation de cette directive est similaire &#224; celle de la
directive <code class="directive"><a href="#proxypassreverse">ProxyPassReverse</a></code>,
mais au lieu de r&#233;&#233;crire des en-t&#234;tes qui contiennent des URLs, elle
r&#233;&#233;crit la cha&#238;ne correspondant au domaine dans les en-t&#234;tes
<code>Set-Cookie</code>.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypassreversecookiepath" id="proxypassreversecookiepath">Directive</a> <a name="ProxyPassReverseCookiePath" id="ProxyPassReverseCookiePath">ProxyPassReverseCookiePath</a><a title="Lien permanent" href="#proxypassreversecookiepath" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Ajuste la cha&#238;ne correspondant au chemin dans les en-t&#234;tes
Set-Cookie en provenance d'un serveur mandat&#233;</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPassReverseCookiePath <var>chemin-interne</var>
<var>chemin-public</var> [<var>interpolate</var>]</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
<p>
Cette directive s'av&#232;re utile en conjonction avec la directive
<code class="directive"><a href="#proxypassreverse">ProxyPassReverse</a></code> dans les
situations o&#249; les chemins d'URL d'arri&#232;re-plan correspondent &#224; des
chemins publics sur le mandataire inverse. Cette directive permet de
r&#233;&#233;crire la cha&#238;ne <code>path</code> dans les en-t&#234;tes
<code>Set-Cookie</code>. Si le d&#233;but du chemin du cookie correspond &#224;
<var>chemin-interne</var>, le chemin du cookie sera remplac&#233; par
<var>chemin-public</var>.
</p><p>
Dans l'exemple fourni avec la directive <code class="directive"><a href="#proxypassreverse">ProxyPassReverse</a></code>, la directive :
</p>
    <pre class="prettyprint lang-config">ProxyPassReverseCookiePath  "/"  "/mirror/foo/"</pre>

<p>
va r&#233;&#233;crire un cookie poss&#233;dant un chemin d'arri&#232;re-plan <code>/</code>
(ou <code>/example</code> ou en fait tout chemin)
en <code>/mirror/foo/</code>..
</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxypreservehost" id="proxypreservehost">Directive</a> <a name="ProxyPreserveHost" id="ProxyPreserveHost">ProxyPreserveHost</a><a title="Lien permanent" href="#proxypreservehost" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Utilise l'en-t&#234;te de requ&#234;te entrante Host pour la requ&#234;te
du mandataire</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyPreserveHost On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyPreserveHost Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>Utilisable
dans un contexte de r&#233;pertoire depuis la version 2.3.3.</td></tr>
</table>
    <p>Lorsqu'elle est activ&#233;e, cette directive va transmettre l'en-t&#234;te
    Host: de la requ&#234;te entrante vers le serveur mandat&#233;, au lieu du nom
    d'h&#244;te sp&#233;cifi&#233; par la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>

    <p>Cette directive est habituellement d&#233;finie &#224; <code>Off</code>.
    Elle est principalement utile dans les configurations particuli&#232;res
    comme l'h&#233;bergement virtuel mandat&#233; en masse &#224; base de nom, o&#249;
    l'en-t&#234;te Host d'origine doit &#234;tre &#233;valu&#233; par le serveur
    d'arri&#232;re-plan.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyreceivebuffersize" id="proxyreceivebuffersize">Directive</a> <a name="ProxyReceiveBufferSize" id="ProxyReceiveBufferSize">ProxyReceiveBufferSize</a><a title="Lien permanent" href="#proxyreceivebuffersize" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Taille du tampon r&#233;seau pour les connexions mandat&#233;es HTTP
et FTP</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyReceiveBufferSize <var>octets</var></code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyReceiveBufferSize 0</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">ProxyReceiveBufferSize</code> permet
    de sp&#233;cifier une taille de tampon r&#233;seau explicite (TCP/IP) pour les
    connexions mandat&#233;es HTTP et FTP, afin d'am&#233;liorer le d&#233;bit de
    donn&#233;es. Elle doit &#234;tre sup&#233;rieure &#224; <code>512</code> ou d&#233;finie &#224;
    <code>0</code> pour indiquer que la taille de tampon par d&#233;faut du
    syst&#232;me doit &#234;tre utilis&#233;e.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyReceiveBufferSize 2048</pre>
</div>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyremote" id="proxyremote">Directive</a> <a name="ProxyRemote" id="ProxyRemote">ProxyRemote</a><a title="Lien permanent" href="#proxyremote" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Mandataire distant &#224; utiliser pour traiter certaines
requ&#234;tes</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyRemote <var>comparaison</var> <var>serveur-distant</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet de d&#233;finir des mandataires distants pour
    ce mandataire. <var>comparaison</var> est soit le nom d'un protocole
    que supporte le serveur distant, soit une URL partielle pour
    laquelle le serveur distant devra &#234;tre utilis&#233;, soit <code>*</code>
    pour indiquer que le serveur distant doit &#234;tre utilis&#233; pour toutes
    les requ&#234;tes. <var>serveur-distant</var> est une URL partielle
    correspondant au serveur distant. Syntaxe : </p>

    <div class="example"><p><code>
      <dfn>serveur-distant</dfn> =
          <var>protocole</var>://<var>nom-serveur</var>[:<var>port</var>]
    </code></p></div>

    <p><var>protocole</var> est effectivement le protocole &#224; utiliser
    pour communiquer avec le serveur distant ; ce module ne supporte que
    <code>http</code> et <code>https</code>. Lorsqu'on utilise
    <code>https</code>, les requ&#234;tes sont redirig&#233;es par le mandataire
    distant en utilisant la m&#233;thode HTTP CONNECT.</p>

    <div class="example"><h3>Exemple</h3><pre class="prettyprint lang-config">ProxyRemote http://goodguys.example.com/ http://mirrorguys.example.com:8000
ProxyRemote * http://cleverproxy.localdomain
ProxyRemote ftp http://ftpproxy.mydomain:8080</pre>
</div>

    <p>Dans la derni&#232;re ligne de l'exemple, le mandataire va faire
    suivre les requ&#234;tes FTP, encapsul&#233;es dans une autre requ&#234;te mandat&#233;e
    HTTP, vers un autre mandataire capable de les traiter.</p>

    <p>Cette directive supporte aussi les configurations de mandataire
    inverse ; un serveur web d'arri&#232;re-plan peut &#234;tre int&#233;gr&#233; dans
    l'espace d'URL d'un serveur virtuel, m&#234;me si ce serveur est cach&#233;
    par un autre mandataire direct.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyremotematch" id="proxyremotematch">Directive</a> <a name="ProxyRemoteMatch" id="ProxyRemoteMatch">ProxyRemoteMatch</a><a title="Lien permanent" href="#proxyremotematch" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Le mandataire distant &#224; utiliser pour traiter les requ&#234;tes
correspondant &#224; une expression rationnelle</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyRemoteMatch <var>regex</var> <var>serveur-distant</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>La directive <code class="directive">ProxyRemoteMatch</code> est
    identique &#224; la directive <code class="directive"><a href="#proxyremote">ProxyRemote</a></code>, &#224; l'exception du
    premier argument qui est une <a class="glossarylink" href="../glossary.html#regex" title="voir glossaire">expression
    rationnelle</a> &#224; mettre en correspondance avec l'URL de la
    requ&#234;te.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyrequests" id="proxyrequests">Directive</a> <a name="ProxyRequests" id="ProxyRequests">ProxyRequests</a><a title="Lien permanent" href="#proxyrequests" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Active la fonctionnalit&#233; (standard) de mandataire
direct</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyRequests On|Off</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyRequests Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet d'activer/d&#233;sactiver la fonctionnalit&#233; de
    serveur mandataire direct d'Apache httpd. D&#233;finir ProxyRequests &#224;
    <code>Off</code> n'interdit pas l'utilisation de la directive
    <code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>

    <p>Pour une configuration typique de mandataire inverse ou
    passerelle, cette directive doit &#234;tre d&#233;finie &#224;
    <code>Off</code>.</p>

    <p>Afin d'activer la fonctionnalit&#233; de mandataire pour des sites
    HTTP et/ou FTP, les modules <code class="module"><a href="../mod/mod_proxy_http.html">mod_proxy_http</a></code> et/ou
    <code class="module"><a href="../mod/mod_proxy_ftp.html">mod_proxy_ftp</a></code> doivent &#233;galement &#234;tre charg&#233;s dans le
    serveur.</p>

    <p>Pour activer la fonctionnalit&#233; de mandataire sur les sites chiffr&#233;s en HTTPS, le module
    <code class="module"><a href="../mod/mod_proxy_connect.html">mod_proxy_connect</a></code> doit &#233;galement &#234;tre charg&#233; dans le serveur.</p>

    <div class="warning"><h3>Avertissement</h3>
      <p>N'activez pas la fonctionnalit&#233; de mandataire avec la directive
      <code class="directive"><a href="#proxyrequests">ProxyRequests</a></code> avant
      d'avoir <a href="#access">s&#233;curis&#233; votre serveur</a>. Les serveurs
      mandataires ouverts sont dangereux non seulement pour votre
      r&#233;seau, mais aussi pour l'Internet au sens large.</p>
    </div>

<h3>Voir aussi</h3>
<ul>
<li><a href="#forwardreverse">Mandataires/Passerelles directs et
inverses</a></li>
</ul>
</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyset" id="proxyset">Directive</a> <a name="ProxySet" id="ProxySet">ProxySet</a><a title="Lien permanent" href="#proxyset" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>D&#233;finit diff&#233;rents param&#232;tres relatifs &#224; la r&#233;partition de
charge des mandataires et aux membres des groupes de r&#233;partition de
charge</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxySet <var>url</var> <var>cl&#233;=valeur [cl&#233;=valeur ...]</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel, r&#233;pertoire</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive propose une m&#233;thode alternative pour d&#233;finir tout
    param&#232;tre relatif aux r&#233;partiteurs de charge et serveurs cibles de
    mandataires normalement d&#233;finis via la directive <code class="directive"><a href="#proxypass">ProxyPass</a></code>. Si elle se trouve dans un
    conteneur <code>&lt;Proxy <var>url de r&#233;partiteur|url de
    serveur cible</var>&gt;</code>, l'argument <var>url</var> n'est pas
    n&#233;cessaire. Comme effet de bord, le r&#233;partiteur ou serveur cible respectif
    est cr&#233;&#233;. Ceci peut s'av&#233;rer utile pour la mise en oeuvre d'un
    mandataire inverse via une directive <code class="directive"><a href="../mod/mod_rewrite.html#rewriterule">RewriteRule</a></code> au lieu de <code class="directive"><a href="#proxypass">ProxyPass</a></code>.</p>

    <div class="example"><pre class="prettyprint lang-config">&lt;Proxy balancer://hotcluster&gt;
    BalancerMember http://www2.example.com:8080 loadfactor=1
    BalancerMember http://www3.example.com:8080 loadfactor=2
    ProxySet lbmethod=bytraffic
&lt;/Proxy&gt;</pre>
</div>

    <pre class="prettyprint lang-config">&lt;Proxy http://backend&gt;
    ProxySet keepalive=On
&lt;/Proxy&gt;</pre>


    <pre class="prettyprint lang-config">ProxySet balancer://foo lbmethod=bytraffic timeout=15</pre>


    <pre class="prettyprint lang-config">ProxySet ajp://backend:7001 timeout=15</pre>


   <div class="warning"><h3>Avertissement</h3>
      <p>Gardez &#224; l'esprit qu'une m&#234;me cl&#233; de param&#232;tre peut avoir
      diff&#233;rentes significations selon qu'elle s'applique &#224; un
      r&#233;partiteur ou &#224; un serveur cible, et ceci est illustr&#233; par les deux
      exemples pr&#233;c&#233;dents o&#249; il est question d'un timeout.</p>
   </div>


</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxysourceaddress" id="proxysourceaddress">Directive</a> <a name="ProxySourceAddress" id="ProxySourceAddress">ProxySourceAddress</a><a title="Lien permanent" href="#proxysourceaddress" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>D&#233;finit l'adresse IP locale pour les connexions mandat&#233;es
sortantes</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxySourceAddress <var>adresse</var></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
<tr><th><a href="directive-dict.html#Compatibility">Compatibilit&#233;:</a></th><td>Disponible depuis la version 2.3.9</td></tr>
</table>
    <p>Cette directive permet de d&#233;finir une adresse IP locale
    sp&#233;cifique &#224; laquelle faire r&#233;f&#233;rence lors d'une connexion &#224; un
    serveur d'arri&#232;re-plan.</p>


</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxystatus" id="proxystatus">Directive</a> <a name="ProxyStatus" id="ProxyStatus">ProxyStatus</a><a title="Lien permanent" href="#proxystatus" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Affiche l'&#233;tat du r&#233;partiteur de charge du mandataire dans
mod_status</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyStatus Off|On|Full</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyStatus Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet de sp&#233;cifier si les donn&#233;es d'&#233;tat du
    r&#233;partiteur de charge du mandataire doivent &#234;tre affich&#233;es via la
    page d'&#233;tat du serveur du module <code class="module"><a href="../mod/mod_status.html">mod_status</a></code>.</p>
    <div class="note"><h3>Note</h3>
      <p>L'argument <strong>Full</strong> produit le m&#234;me effet que
      l'argument <strong>On</strong>.</p>
    </div>


</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxytimeout" id="proxytimeout">Directive</a> <a name="ProxyTimeout" id="ProxyTimeout">ProxyTimeout</a><a title="Lien permanent" href="#proxytimeout" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>D&#233;lai d'attente r&#233;seau pour les requ&#234;tes
mandat&#233;es</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyTimeout <var>time-interval</var>[s]</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>Valeur de la directive <code class="directive"><a href="../mod/core.html#timeout">Timeout</a></code></code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet &#224; l'utilisateur de sp&#233;cifier un d&#233;lai pour
    les requ&#234;tes mandat&#233;es. Ceci s'av&#232;re utile dans le cas d'un serveur
    d'applications lent et bogu&#233; qui a tendance &#224; se bloquer, et si vous
    pr&#233;f&#233;rez simplement renvoyer une erreur timeout et abandonner la
    connexion en douceur plut&#244;t que d'attendre jusqu'&#224; ce que le serveur
    veuille bien r&#233;pondre.</p>

</div>
<div class="top"><a href="#page-header"><img alt="top" src="../images/up.gif" /></a></div>
<div class="directive-section"><h2><a name="proxyvia" id="proxyvia">Directive</a> <a name="ProxyVia" id="ProxyVia">ProxyVia</a><a title="Lien permanent" href="#proxyvia" class="permalink">&para;</a></h2>
<table class="directive">
<tr><th><a href="directive-dict.html#Description">Description:</a></th><td>Information fournie dans l'en-t&#234;te de r&#233;ponse HTTP
<code>Via</code> pour les requ&#234;tes mandat&#233;es</td></tr>
<tr><th><a href="directive-dict.html#Syntax">Syntaxe:</a></th><td><code>ProxyVia On|Off|Full|Block</code></td></tr>
<tr><th><a href="directive-dict.html#Default">D&#233;faut:</a></th><td><code>ProxyVia Off</code></td></tr>
<tr><th><a href="directive-dict.html#Context">Contexte:</a></th><td>configuration globale, serveur virtuel</td></tr>
<tr><th><a href="directive-dict.html#Status">Statut:</a></th><td>Extension</td></tr>
<tr><th><a href="directive-dict.html#Module">Module:</a></th><td>mod_proxy</td></tr>
</table>
    <p>Cette directive permet de contr&#244;ler l'utilisation de l'en-t&#234;te
    HTTP <code>Via:</code> par le mandataire. Le but recherch&#233; est de
    contr&#244;ler le flux des requ&#234;tes mandat&#233;es tout au long d'une cha&#238;ne
    de serveurs mandataires. Voir <a href="http://www.ietf.org/rfc/rfc2616.txt">RFC 2616</a> (HTTP/1.1),
    section 14.45 pour une description des lignes d'en-t&#234;te
    <code>Via:</code>.</p>

    <ul>
    <li>Si elle est d&#233;finie &#224; <code>Off</code>, valeur par d&#233;faut, cette
    directive n'effectue aucun traitement particulier. Si une requ&#234;te ou
    une r&#233;ponse contient un en-t&#234;te <code>Via:</code>, il est transmis
    sans modification.</li>

    <li>Si elle est d&#233;finie &#224; <code>On</code>, chaque requ&#234;te ou r&#233;ponse
    se verra ajouter une ligne d'en-t&#234;te <code>Via:</code> pour le
    serveur courant.</li>

    <li>Si elle est d&#233;finie &#224; <code>Full</code>, chaque ligne d'en-t&#234;te
    <code>Via:</code> se verra ajouter la version du serveur Apache
    httpd sous la forme d'un champ de commentaire <code>Via:</code>.</li>

    <li>Si elle est d&#233;finie &#224; <code>Block</code>, chaque requ&#234;te
    mandat&#233;e verra ses lignes d'en-t&#234;te <code>Via:</code> supprim&#233;es.
    Aucun nouvel en-t&#234;te <code>Via:</code> ne sera g&#233;n&#233;r&#233;.</li>
    </ul>

</div>
</div>
<div class="bottomlang">
<p><span>Langues Disponibles: </span><a href="../en/mod/mod_proxy.html" hreflang="en" rel="alternate" title="English">&nbsp;en&nbsp;</a> |
<a href="../fr/mod/mod_proxy.html" title="Fran&#231;ais">&nbsp;fr&nbsp;</a> |
<a href="../ja/mod/mod_proxy.html" hreflang="ja" rel="alternate" title="Japanese">&nbsp;ja&nbsp;</a></p>
</div><div class="top"><a href="#page-header"><img src="../images/up.gif" alt="top" /></a></div><div class="section"><h2><a id="comments_section" name="comments_section">Commentaires</a></h2><div class="warning"><strong>Notice:</strong><br />This is not a Q&amp;A section. Comments placed here should be pointed towards suggestions on improving the documentation or server, and may be removed again by our moderators if they are either implemented or considered invalid/off-topic. Questions on how to manage the Apache HTTP Server should be directed at either our IRC channel, #httpd, on Freenode, or sent to our <a href="http://httpd.apache.org/lists.html">mailing lists</a>.</div>
<script type="text/javascript"><!--//--><![CDATA[//><!--
var comments_shortname = 'httpd';
var comments_identifier = 'http://httpd.apache.org/docs/trunk/mod/mod_proxy.html';
(function(w, d) {
    if (w.location.hostname.toLowerCase() == "httpd.apache.org") {
        d.write('<div id="comments_thread"><\/div>');
        var s = d.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'https://comments.apache.org/show_comments.lua?site=' + comments_shortname + '&page=' + comments_identifier;
        (d.getElementsByTagName('head')[0] || d.getElementsByTagName('body')[0]).appendChild(s);
    }
    else {
        d.write('<div id="comments_thread">Comments are disabled for this page at the moment.<\/div>');
    }
})(window, document);
//--><!]]></script></div><div id="footer">
<p class="apache">Copyright 2018 The Apache Software Foundation.<br />Autoris&#233; sous <a href="http://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>.</p>
<p class="menu"><a href="../mod/">Modules</a> | <a href="../mod/quickreference.html">Directives</a> | <a href="http://wiki.apache.org/httpd/FAQ">FAQ</a> | <a href="../glossary.html">Glossaire</a> | <a href="../sitemap.html">Plan du site</a></p></div><script type="text/javascript"><!--//--><![CDATA[//><!--
if (typeof(prettyPrint) !== 'undefined') {
    prettyPrint();
}
//--><!]]></script>
</body></html>